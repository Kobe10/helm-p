var DWZ={keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{pageClear:"pageClear",resizeGrid:"resizeGrid"},isOverAxis:function(b,a,c){return(b>a)&&(b<(a+c))},isOver:function(f,b,e,d,a,c){return this.isOverAxis(f,e,a)&&this.isOverAxis(b,d,c)},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:200,error:300,timeout:301},ui:{sbar:true},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:false},msg:function(c,b){var a=function(g,e){e=e||[];var d=g||"";for(var f=0;f<e.length;f++){d=d.replace(new RegExp("\\{"+f+"\\}","g"),e[f])}return d};return a(this._msg[c],b)},debug:function(a){if(this._set.debug){if(typeof(console)!="undefined"){console.log(a)}else{alert(a)}}},loadLogin:function(){if($.pdialog&&DWZ._set.loginTitle){$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:true,width:520,height:260})}else{window.location=DWZ._set.loginUrl}},obj2str:function(c){var b=[];if(typeof c=="string"){return'"'+c.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"'}if(typeof c=="object"){if(!c.sort){for(var a in c){b.push(a+":"+DWZ.obj2str(c[a]))}if(!!document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(c.toString)){b.push("toString:"+c.toString.toString())}b="{"+b.join()+"}"}else{for(var a=0;a<c.length;a++){b.push(DWZ.obj2str(c[a]))}b="["+b.join()+"]"}return b}return c.toString()},jsonEval:function(data){try{if($.type(data)=="string"){return eval("("+data+")")}else{return data}}catch(e){return{}}},ajaxError:function(xhr,ajaxOptions,thrownError){if(alertMsg){if(xhr.status!=500){alertMsg.error("<div>Http status: "+xhr.status+" "+xhr.statusText+"</div><div>ajaxOptions: "+ajaxOptions+"</div><div>thrownError: "+thrownError+"</div><div>"+xhr.responseText+"</div>")}else{var errorJsonStr=xhr.getResponseHeader("Error-Json");if(errorJsonStr!=null||errorJsonStr!=""){var errorJson=eval("("+errorJsonStr+")");if(errorJson.code&&errorJson.code=="121004"){top.alertMsg.warn("用户未登录或登录失效!")}else{if(errorJson.code&&errorJson.code=="121005"){top.alertMsg.warn("禁止非法进入系统!")}else{alertMsg.warn("服务信息返回错误!")}}}else{alertMsg.warn("服务信息返回错误!")}}}else{alert("Http status: "+xhr.status+" "+xhr.statusText+"\najaxOptions: "+ajaxOptions+"\nthrownError:"+thrownError+"\n"+xhr.responseText)}},ajaxDone:function(a){if(a.statusCode==DWZ.statusCode.error){if(a.message&&alertMsg){alertMsg.error(a.message)}}else{if(a.statusCode==DWZ.statusCode.timeout){if(alertMsg){alertMsg.error(a.message||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin})}else{DWZ.loadLogin()}}else{if(a.message&&alertMsg){alertMsg.correct(a.message)}}}},init:function(b,a){var d=$.extend({loginUrl:"login.jsp",loginTitle:null,callback:null,debug:false,statusCode:{}},a);this._set.loginUrl=d.loginUrl;this._set.loginTitle=d.loginTitle;this._set.debug=d.debug;$.extend(DWZ.statusCode,d.statusCode);$.extend(DWZ.pageInfo,d.pageInfo);jQuery.ajax({type:"GET",url:b,dataType:"xml",timeout:50000,async:false,cache:false,error:function(e){alert("Error loading XML document: "+b+"\nHttp status: "+e.status+" "+e.statusText)},success:function(e){$(e).find("_PAGE_").each(function(){var f=$(this).attr("id");if(f){DWZ.frag[f]=$(this).text()}});$(e).find("_MSG_").each(function(){var f=$(this).attr("id");if(f){DWZ._msg[f]=$(this).text()}});if(jQuery.isFunction(d.callback)){d.callback()}}});var c=$(document);if(!c.isBind(DWZ.eventType.pageClear)){c.bind(DWZ.eventType.pageClear,function(f){var e=f.target;if($.fn.xheditor){$("textarea.editor",e).xheditor(false)}})}}};(function(a){a.setRegional=function(b,c){if(!a.regional){a.regional={}}a.regional[b]=c};a.fn.extend({ajaxUrl:function(d){var c=a(this);c.trigger(DWZ.eventType.pageClear);var b=a("#background,#progressBar");b.show();a.ajax({type:d.type||"GET",url:d.url,data:d.data,cache:false,complete:function(e,f){if(b){b.hide()}},success:function(e){var f=DWZ.jsonEval(e);if(f.statusCode==DWZ.statusCode.error){if(f.message){alertMsg.error(f.message)}}else{if(isIE()){e=e.replace(/td>\s+<td/g,"td><td")}c.html(e).initUI();if(a.isFunction(d.callback)){d.callback(e)}}if(f.statusCode==DWZ.statusCode.timeout){if(a.pdialog){a.pdialog.checkTimeout()}if(navTab){navTab.checkTimeout()}alertMsg.error(f.message||DWZ.msg("sessionTimout"),{okCall:function(){DWZ.loadLogin()}})}},error:DWZ.ajaxError,statusCode:{503:function(g,e,f){alert(DWZ.msg("statusCode_503")||f)}}})},loadUrl:function(b,c,d){a(this).ajaxUrl({url:b,data:c,callback:d})},initUI:function(){return this.each(function(){if(a.isFunction(initUI)){initUI(this)}})},layoutH:function(b){return this.each(function(){var e=a(this);if(!b){b=e.parents("div.layoutBox:first")}var c=b.height();var f=parseInt(e.attr("layoutH"));var d=c-f>50?c-f:50;if(e.closest(".page").find(">.pageHeader").length&&e.closest(".page").find(">.pageContent>.panelBar").length){d=d-e.closest(".page").find(">.pageHeader").outerHeight(true)}if(e.isTag("table")){e.removeAttr("layoutH").wrap('<div layoutH="'+f+'" style="overflow:auto;height:'+d+'px"></div>')}else{e.height(d).css("overflow","auto")}})},hoverClass:function(b,d){var c=b||"hover";return this.each(function(){var f=a(this),e;f.hover(function(){if(e){clearTimeout(e)}f.addClass(c)},function(){e=setTimeout(function(){f.removeClass(c)},d||10)})})},focusClass:function(b){var c=b||"textInputFocus";return this.each(function(){a(this).focus(function(){a(this).addClass(c)}).blur(function(){a(this).removeClass(c)})})},inputAlert:function(){return this.each(function(){var d=a(this);function c(){return d.parent().find("label.alt")}function e(g){var f=d.position();return{width:d.width(),top:f.top+"px",left:f.left+"px",opacity:g||1}}if(c().size()<1){if(!d.attr("id")){d.attr("id",d.attr("name")+"_"+Math.round(Math.random()*10000))}var b=a('<label class="alt" for="'+d.attr("id")+'">'+d.attr("alt")+"</label>").appendTo(d.parent());b.css(e(1));if(d.val()){b.hide()}}d.focus(function(){c().css(e(0.3))}).blur(function(){if(!a(this).val()){c().show().css("opacity",1)}}).keydown(function(){c().hide()})})},isTag:function(b){if(!b){return false}return a(this)[0].tagName.toLowerCase()==b?true:false},isBind:function(b){var c=a(this).data("events");return c&&b&&c[b]},log:function(b){return this.each(function(){if(console){console.log("%s: %o",b,this)}})}});a.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/).test(this))},isInteger:function(){return(new RegExp(/^\d+$/).test(this))},isNumber:function(c,b){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this))},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(b){return this.indexOf(b)===0},endsWith:function(b){var c=this.length-b.length;return c>=0&&this.lastIndexOf(b)===c},replaceSuffix:function(b){return this.replace(/\[[0-9]+\]/,"["+b+"]").replace("#index#",b)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return(this).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(c,b){return this.replace(new RegExp(c,"gm"),b)},replaceTm:function(b){if(!b){return this}return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(c){return b[c.replace(/[{}]+/g,"")]})},replaceTmById:function(b){var c=b||a(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(d){var e=c.find("#"+d.replace(/[{}]+/g,""));return e.val()?e.val():d})},isFinishedTm:function(){return !(new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this))},skipChar:function(b){if(!this||this.length===0){return""}if(this.charAt(0)===b){return this.substring(1).skipChar(b)}return this},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this))},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim()))},isSpaces:function(){for(var b=0;b<this.length;b+=1){var c=this.charAt(b);if(c!=" "&&c!="\n"&&c!="\t"&&c!="\r"){return false}}return true},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this))},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this))},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1}})})(jQuery);function Map(){this.elements=[];this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=[]};this.put=function(b,a){this.remove(b);this.elements.push({key:b,value:a})};this.remove=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){this.elements.splice(i,1);return true}}}catch(b){return false}return false};this.get=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){return this.elements[i].value}}}catch(b){return null}};this.element=function(a){if(a<0||a>=this.elements.length){return null}return this.elements[a]};this.containsKey=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){return true}}}catch(b){return false}return false};this.values=function(){var a=[];for(i=0;i<this.elements.length;i++){a.push(this.elements[i].value)}return a};this.keys=function(){var a=[];for(i=0;i<this.elements.length;i++){a.push(this.elements[i].key)}return a}}(function(){var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");function LZ(x){return(x<0||x>9?"":"0")+x}function formatDate(date,format){format=format+"";var result="";var i_format=0;var c="";var token="";var y=date.getYear()+"";var M=date.getMonth()+1;var d=date.getDate();var E=date.getDay();var H=date.getHours();var m=date.getMinutes();var s=date.getSeconds();var yyyy,yy,MMM,MM,dd,hh,h,mm,ss,ampm,HH,H,KK,K,kk,k;var value={};if(y.length<4){y=""+(y-0+1900)}value.y=""+y;value.yyyy=y;value.yy=y.substring(2,4);value.M=M;value.MM=LZ(M);value.MMM=MONTH_NAMES[M-1];value.NNN=MONTH_NAMES[M+11];value.d=d;value.dd=LZ(d);value.E=DAY_NAMES[E+7];value.EE=DAY_NAMES[E];value.H=H;value.HH=LZ(H);if(H==0){value.h=12}else{if(H>12){value.h=H-12}else{value.h=H}}value.hh=LZ(value.h);if(H>11){value.K=H-12}else{value.K=H}value.k=H+1;value.KK=LZ(value.K);value.kk=LZ(value.k);if(H>11){value.a="PM"}else{value.a="AM"}value.m=m;value.mm=LZ(m);value.s=s;value.ss=LZ(s);while(i_format<format.length){c=format.charAt(i_format);token="";while((format.charAt(i_format)==c)&&(i_format<format.length)){token+=format.charAt(i_format++)}if(value[token]!=null){result+=value[token]}else{result+=token}}return result}function _isInteger(val){return(new RegExp(/^\d+$/).test(val))}function _getInt(str,i,minlength,maxlength){for(var x=maxlength;x>=minlength;x--){var token=str.substring(i,i+x);if(token.length<minlength){return null}if(_isInteger(token)){return token}}return null}function parseDate(val,format){val=val+"";format=format+"";var i_val=0;var i_format=0;var c="";var token="";var token2="";var x,y;var now=new Date(1900,0,1);var year=now.getYear();var month=now.getMonth()+1;var date=1;var hh=now.getHours();var mm=now.getMinutes();var ss=now.getSeconds();var ampm="";while(i_format<format.length){c=format.charAt(i_format);token="";while((format.charAt(i_format)==c)&&(i_format<format.length)){token+=format.charAt(i_format++)}if(token=="yyyy"||token=="yy"||token=="y"){if(token=="yyyy"){x=4;y=4}if(token=="yy"){x=2;y=2}if(token=="y"){x=2;y=4}year=_getInt(val,i_val,x,y);if(year==null){return 0}i_val+=year.length;if(year.length==2){if(year>70){year=1900+(year-0)}else{year=2000+(year-0)}}}else{if(token=="MMM"||token=="NNN"){month=0;for(var i=0;i<MONTH_NAMES.length;i++){var month_name=MONTH_NAMES[i];if(val.substring(i_val,i_val+month_name.length).toLowerCase()==month_name.toLowerCase()){if(token=="MMM"||(token=="NNN"&&i>11)){month=i+1;if(month>12){month-=12}i_val+=month_name.length;break}}}if((month<1)||(month>12)){return 0}}else{if(token=="EE"||token=="E"){for(var i=0;i<DAY_NAMES.length;i++){var day_name=DAY_NAMES[i];if(val.substring(i_val,i_val+day_name.length).toLowerCase()==day_name.toLowerCase()){i_val+=day_name.length;break}}}else{if(token=="MM"||token=="M"){month=_getInt(val,i_val,token.length,2);if(month==null||(month<1)||(month>12)){return 0}i_val+=month.length}else{if(token=="dd"||token=="d"){date=_getInt(val,i_val,token.length,2);if(date==null||(date<1)||(date>31)){return 0}i_val+=date.length}else{if(token=="hh"||token=="h"){hh=_getInt(val,i_val,token.length,2);if(hh==null||(hh<1)||(hh>12)){return 0}i_val+=hh.length}else{if(token=="HH"||token=="H"){hh=_getInt(val,i_val,token.length,2);if(hh==null||(hh<0)||(hh>23)){return 0}i_val+=hh.length}else{if(token=="KK"||token=="K"){hh=_getInt(val,i_val,token.length,2);if(hh==null||(hh<0)||(hh>11)){return 0}i_val+=hh.length}else{if(token=="kk"||token=="k"){hh=_getInt(val,i_val,token.length,2);if(hh==null||(hh<1)||(hh>24)){return 0}i_val+=hh.length;hh--}else{if(token=="mm"||token=="m"){mm=_getInt(val,i_val,token.length,2);if(mm==null||(mm<0)||(mm>59)){return 0}i_val+=mm.length}else{if(token=="ss"||token=="s"){ss=_getInt(val,i_val,token.length,2);if(ss==null||(ss<0)||(ss>59)){return 0}i_val+=ss.length}else{if(token=="a"){if(val.substring(i_val,i_val+2).toLowerCase()=="am"){ampm="AM"}else{if(val.substring(i_val,i_val+2).toLowerCase()=="pm"){ampm="PM"}else{return 0}}i_val+=2}else{if(val.substring(i_val,i_val+token.length)!=token){return 0}else{i_val+=token.length}}}}}}}}}}}}}}if(i_val!=val.length){return 0}if(month==2){if(((year%4==0)&&(year%100!=0))||(year%400==0)){if(date>29){return 0}}else{if(date>28){return 0}}}if((month==4)||(month==6)||(month==9)||(month==11)){if(date>30){return 0}}if(hh<12&&ampm=="PM"){hh=hh-0+12}else{if(hh>11&&ampm=="AM"){hh-=12}}return new Date(year,month-1,date,hh,mm,ss)}Date.prototype.formatDate=function(dateFmt){return formatDate(this,dateFmt)};String.prototype.parseDate=function(dateFmt){if(this.length<dateFmt.length){dateFmt=dateFmt.slice(0,this.length)}return parseDate(this,dateFmt)};function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}Date.prototype.formatDateTm=function(dateFmt){var y=this.getFullYear();var m=this.getMonth()+1;var d=this.getDate();var sDate=dateFmt.replaceAll("%y",y).replaceAll("%M",m).replaceAll("%d",d);sDate=replaceTmEval(sDate);var _y=1900,_m=0,_d=1;var aDate=sDate.split("-");if(aDate.length>0){_y=aDate[0]}if(aDate.length>1){_m=aDate[1]-1}if(aDate.length>2){_d=aDate[2]}return new Date(_y,_m,_d).formatDate("yyyy-MM-dd")}})();(function(a){if(a.validator){a.validator.addMethod("alphanumeric",function(c,b){return this.optional(b)||/^\w+$/i.test(c)},"Letters, numbers or underscores only please");a.validator.addMethod("lettersonly",function(c,b){return this.optional(b)||/^[a-z]+$/i.test(c)},"Letters only please");a.validator.addMethod("phone",function(c,b){return this.optional(b)||/^[0-9 \(\)]{7,30}$/.test(c)},"Please specify a valid phone number");a.validator.addMethod("postcode",function(c,b){return this.optional(b)||/^[0-9 A-Za-z]{5,20}$/.test(c)},"Please specify a valid postcode");a.validator.addMethod("hssize",function(c,b){return this.optional(b)||/^\d+(\.\d\d)$/g.test(c)},"Please specify a valid house size");a.validator.addMethod("date",function(d,b){d=d.replace(/\s+/g,"");if(String.prototype.parseDate){var e=a(b);var c=e.attr("dateFmt")||"yyyy-MM-dd";return !e.val()||e.val().parseDate(c)}else{return this.optional(b)||d.match(/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/)}},"Please enter a valid date.");a.validator.addMethod("idcard",function(c,b){return this.optional(b)||CheckUtil.IdCardValidate(c)},"Please enter a valid card.");a.validator.addClassRules({date:{date:true},alphanumeric:{alphanumeric:true},lettersonly:{lettersonly:true},phone:{phone:true},postcode:{postcode:true},idcard:{idcard:true}});a.validator.setDefaults({errorElement:"span"});a.validator.autoCreateRanges=true}})(jQuery);(function(a){a.extend({History:{_hash:new Array(),_cont:undefined,_currentHash:"",_callback:undefined,init:function(b,f){a.History._cont=b;a.History._callback=f;var e=location.hash.replace(/\?.*$/,"");a.History._currentHash=e;if(a.browser.msie){if(a.History._currentHash==""){a.History._currentHash="#"}a("body").append('<iframe id="jQuery_history" style="display: none;" src="about:blank"></iframe>');var c=a("#jQuery_history")[0];var d=c.contentDocument||c.contentWindow.document;d.open();d.close();d.location.hash=e}if(a.isFunction(this._callback)){a.History._callback(e.skipChar("#"))}setInterval(a.History._historyCheck,100)},_historyCheck:function(){var d="";if(a.browser.msie){var b=a("#jQuery_history")[0];var c=b.contentWindow;d=c.location.hash.skipChar("#").replace(/\?.*$/,"")}else{d=location.hash.skipChar("#").replace(/\?.*$/,"")}if(d!=a.History._currentHash){a.History._currentHash=d;a.History.loadHistory(d)}},addHistory:function(g,c,d){a.History._currentHash=g;var f=[g,c,d];a.History._hash.push(f);if(a.browser.msie){var b=a("#jQuery_history")[0];var e=b.contentDocument||b.contentWindow.document;e.open();e.close();e.location.hash=g.replace(/\?.*$/,"");location.hash=g.replace(/\?.*$/,"")}else{location.hash=g.replace(/\?.*$/,"")}},loadHistory:function(c){if(a.browser.msie){location.hash=c}for(var b=0;b<a.History._hash.length;b+=1){if(a.History._hash[b][0]==c){a.History._hash[b][1](a.History._hash[b][2]);return}}}}})})(jQuery);(function(g){var c=new Map();g.dwz=g.dwz||{};g(window).resize(function(){setTimeout(function(){for(var j=0;j<c.size();j++){d(c.element(j).key)}},100)});g.fn.extend({accordion:function(k,l){var j=Array.prototype.slice.call(arguments,1);return this.each(function(){if(k.fillSpace){c.put(k.fillSpace,this)}if(typeof k=="string"){var m=g.data(this,"dwz-accordion");m[k].apply(m,j)}else{if(!g(this).is(".dwz-accordion")){g.data(this,"dwz-accordion",new g.dwz.accordion(this,k))}}})},activate:function(j){return this.accordion("activate",j)}});g.dwz.accordion=function(j,k){this.options=k=g.extend({},g.dwz.accordion.defaults,k);this.element=j;g(j).addClass("dwz-accordion");if(k.navigation){var m=g(j).find("a").filter(k.navigationFilter);if(m.length){if(m.filter(k.header).length){k.active=m}else{k.active=m.parent().parent().prev();m.addClass("current")}}}k.headers=g(j).find(k.header);k.active=e(k.headers,k.active);if(k.fillSpace){d(k.fillSpace)}else{if(k.autoheight){var l=0;k.headers.next().each(function(){l=Math.max(l,g(this).outerHeight())}).height(l)}}k.headers.not(k.active||"").next().hide();k.active.find("h2").addClass(k.selectedClass);if(k.event){g(j).bind((k.event)+".dwz-accordion",h)}};g.dwz.accordion.prototype={activate:function(j){h.call(this.element,{target:e(this.options.headers,j)[0]})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.options.headers.next().css("display","");if(this.options.fillSpace||this.options.autoheight){this.options.headers.next().css("height","")}g.removeData(this.element,"dwz-accordion");g(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}};function b(k,j){return function(){return k.apply(j,arguments)}}function f(l){if(!g.data(this,"dwz-accordion")){return}var j=g.data(this,"dwz-accordion");var k=j.options;k.running=l?0:--k.running;if(k.running){return}if(k.clearStyle){k.toShow.add(k.toHide).css({height:"",overflow:""})}g(this).triggerHandler("change.dwz-accordion",[k.data],k.change)}function d(k){var n=c.get(k);if(!n){return}var l=g(n).parent();var j=l.height()-((g(".accordionHeader",n).size())*(g(".accordionHeader:first-child",n).outerHeight()))-2;var m=l.children().not(n);g.each(m,function(o){j-=g(m[o]).outerHeight()});g(".accordionContent",n).height(j)}function a(j,n,o,m,p){var l=g.data(this,"dwz-accordion").options;l.toShow=j;l.toHide=n;l.data=o;var k=b(f,this);l.running=n.size()==0?j.size():n.size();if(l.animated){if(!l.alwaysOpen&&m){g.dwz.accordion.animations[l.animated]({toShow:jQuery([]),toHide:n,complete:k,down:p,autoheight:l.autoheight})}else{g.dwz.accordion.animations[l.animated]({toShow:j,toHide:n,complete:k,down:p,autoheight:l.autoheight})}}else{if(!l.alwaysOpen&&m){j.toggle()}else{n.hide();j.show()}k(true)}}function h(o){var m=g.data(this,"dwz-accordion").options;if(m.disabled){return false}if(!o.target&&!m.alwaysOpen){m.active.find("h2").toggleClass(m.selectedClass);var l=m.active.next(),p={instance:this,options:m,newHeader:jQuery([]),oldHeader:m.active,newContent:jQuery([]),oldContent:l},j=m.active=g([]);a.call(this,j,l,p);return false}var n=g(o.target);if(n.parents(m.header).length){while(!n.is(m.header)){n=n.parent()}}var k=n[0]==m.active[0];if(m.running||(m.alwaysOpen&&k)){return false}if(!n.is(m.header)){return}m.active.find("h2").toggleClass(m.selectedClass);if(!k){n.find("h2").addClass(m.selectedClass)}var j=n.next(),l=m.active.next(),p={instance:this,options:m,newHeader:n,oldHeader:m.active,newContent:j,oldContent:l},q=m.headers.index(m.active[0])>m.headers.index(n[0]);m.active=k?g([]):n;a.call(this,j,l,p,k,q);return false}function e(k,j){return j!=undefined?typeof j=="number"?k.filter(":eq("+j+")"):k.not(k.not(j)):j===false?g([]):k.filter(":eq(0)")}g.extend(g.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:true,animated:"slide",event:"click",header:".accordionHeader",autoheight:true,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(j,l){j=g.extend({easing:"swing",duration:300},j,l);if(!j.toHide.size()){j.toShow.animate({height:"show"},j);return}var k=j.toHide.height(),m=j.toShow.height(),n=m/k;j.toShow.css({height:0}).show();j.toHide.filter(":hidden").each(j.complete).end().filter(":visible").animate({height:"hide"},{step:function(o){var p=(k-o)*n;if(g.browser.msie||g.browser.opera){p=Math.ceil(p)}j.toShow.height(p)},duration:j.duration,easing:j.easing,complete:function(){if(!j.autoheight){j.toShow.css({height:"auto"})}j.toShow.css({overflow:"auto"});j.complete()}})},bounceslide:function(j){this.slide(j,{easing:j.down?"bounceout":"swing",duration:j.down?1000:200})},easeslide:function(j){this.slide(j,{easing:"easeinout",duration:700})}}})})(jQuery);function initEnv(){$("body").append(DWZ.frag.dwzFrag);if($.browser.msie&&/6.0/.test(navigator.userAgent)){try{document.execCommand("BackgroundImageCache",false,true)}catch(b){}}if($.browser.msie){window.setInterval("CollectGarbage();",10000)}$(window).resize(function(){initLayout();$(this).trigger(DWZ.eventType.resizeGrid)});var a=$("#background,#progressBar");a.hide();if($.fn.jBar){$("#leftside").jBar({minW:150,maxW:700})}if($.taskBar){$.taskBar.init()}navTab.init();if($.fn.switchEnv){$("#switchEnvBox").switchEnv()}if($.fn.navMenu){$("#navMenu").navMenu()}setTimeout(function(){initLayout();initUI();var c=$("div.tabsPageHeader");c.find(".tabsLeft").hoverClass("tabsLeftHover");c.find(".tabsRight").hoverClass("tabsRightHover");c.find(".tabsMore").hoverClass("tabsMoreHover")},10)}function initLayout(){var c=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5;var b=$(window).height()-$("#header").height()-$("#top").height()+3;$("#container").width(c);var d=$("#container .tabsPageHeader");var a=40;if(d.hasClass("hidden")){a=0}$("#container .tabsPageContent").height(b-a).find("[layoutH]").layoutH();$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(b-5);$("#taskbar").css({top:b+$("#header").height()+5,width:$(window).width()})}function initUI(_box){var $p=$(_box||document);$("div.panel",$p).jPanel();$("table.table",$p).jTable();$("table.list",$p).cssTable();$("div.tabs",$p).each(function(){var $this=$(this);var options={};options.currentIndex=$this.attr("currentIndex")||0;options.eventType=$this.attr("eventType")||"click";$this.tabs(options)});$p.undelegate("div.img-wrap label span","click");$p.delegate("div.img-wrap label span.remove","click",function(e){var packet=new AJAXPacket();var docId=$(this).parent().find("input[type=hidden][name=docId]").val();packet.url=getGlobalPathRoot()+"oframe/common/file/file-delete.gv?docId="+docId;var _this=$(this);alertMsg.confirm("确定删除该信息吗？",{okCall:function(){core.ajax.sendPacketHtml(packet,function(response){var jsonData=eval("("+response+")");if(jsonData.success){_this.parent("label").remove()}else{alertMsg.error("删除失败！")}})}})});$p.undelegate("div.img-wrap img","click");$p.delegate("div.img-wrap img","click",function(e){stopEvent(e);var _this=$(this);var docName=_this.parent().find("input[type=hidden][name=docName]").val();if(docName&&!docName.isImg()){$(this).parent().find("a span").click();return}var currentSrc=_this.attr("realSrc");var imgSrcArr=[];var currentIdx=-1;var totalCount=0;_this.parents("div.img-wrap").find("img").each(function(idx,obj){var realSrc=$(obj).attr("realSrc");if(realSrc&&realSrc!=""){totalCount++;imgSrcArr.push(realSrc);if(realSrc==currentSrc){currentIdx=totalCount-1}}});var filter=_this.css("filter");var sInner='<div class="imgShadow"></div><div class="imgDialog" id="imgDialog" allRealSrc="'+imgSrcArr.join(";")+'" currentIdx="'+currentIdx+'"><a href="javascript:void(0)" class="close"></a><div class="btn btnLeft hidden" style="visibility: visible;"><a href="javascript:;" hidefocus="true" title="点击浏览下一张图片，支持→翻页"></a></div><img style="filter:'+filter+'" src="'+currentSrc+'"><div class="btn btnRight hidden" style="visibility: visible;"><a href="javascript:;" hidefocus="true" title="点击浏览下一张图片，支持→翻页"></a></div><iframe transparent="transparent" style="position:absolute;top:0;left:0;width: 100%;height: 100%; z-index: 0;"></iframe></div>';$p.append(sInner);$("#imgDialog div.btnLeft",$p).show();$("#imgDialog div.btnRight",$p).show();if(currentIdx==0||currentIdx==-1){$("#imgDialog div.btnLeft",$p).hide()}if(currentIdx==totalCount-1||currentIdx==-1){$("#imgDialog div.btnRight",$p).hide()}$("#imgDialog div.btnRight",$p).click(function(event){var currentIdx=parseInt($("#imgDialog").attr("currentIdx"));var imgSrcArr=$("#imgDialog").attr("allRealSrc").split(";");var totalCount=imgSrcArr.length;if(currentIdx==totalCount-1){currentIdx=currentIdx}else{currentIdx++}$("#imgDialog").attr("currentIdx",currentIdx);$("#imgDialog div.btnLeft").show();$("#imgDialog div.btnRight").show();if(currentIdx==0){$("#imgDialog div.btnLeft").hide()}if(currentIdx==totalCount-1){$("#imgDialog div.btnRight").hide()}$("#imgDialog img").attr("src",imgSrcArr[currentIdx])});$("#imgDialog div.btnLeft").click(function(event){var currentIdx=parseInt($("#imgDialog").attr("currentIdx"));var imgSrcArr=$("#imgDialog").attr("allRealSrc").split(";");var totalCount=imgSrcArr.length;if(currentIdx<=0){currentIdx=0}else{currentIdx--}$("#imgDialog").attr("currentIdx",currentIdx);$("#imgDialog div.btnLeft").show();$("#imgDialog div.btnRight").show();if(currentIdx==0){$("#imgDialog div.btnLeft").hide()}if(currentIdx==totalCount-1){$("#imgDialog div.btnRight").hide()}$("#imgDialog img").attr("src",imgSrcArr[currentIdx])});$("#imgDialog img",$p).one("load",function(){$("#imgDialog").css({width:$(this).width(),marginLeft:-($(this).width()/2)+"px"});if($(this).height()>=$(window).height()){$(this).height($(window).height()-100).css("marginTop","50px")}}).each(function(){if(this.complete){$(this).load()}});$(document).bind("keydown",ImgPage.keyJump);$("#imgDialog .close",$p).click(function(e){$(".imgShadow").remove();$("#imgDialog").remove();$(document).unbind("keydown",ImgPage.keyJump)})});$(".btn-more",$p).each(function(){$(this).bind("mouseover",function(){$(this).openBtnMenu({offsetX:$(this).attr("offsetX"),offsetY:$(this).attr("offsetY"),btnContainer:$(this).attr("btnContainer")})});$(this).mouseout(function(){$.fn.deActiveBtnMenu()})});$(".js_more",$p).each(function(){$(this).bind("mouseover",function(){$(this).openBtnMenu({offsetX:$(this).attr("offsetX"),offsetY:$(this).attr("offsetY"),openDirection:$(this).attr("openDirection")})});$(this).mouseout(function(){$.fn.deActiveBtnMenu()})});$("input.autocomplete",$p).each(function(){var $this=$(this);var atArray=$(this).attr("atArray");var atOption=$(this).attr("atOption");var atUrl=$(this).attr("atUrl");if(atOption&&!atOption==""){atOption=eval(atOption)($this)}else{atOption={}}if(atArray&&!atArray==""){atArray=eval(atArray)($this);$(this).autocomplete(atArray,atOption)}else{if(atUrl&&!atUrl==""){atUrl=eval(atUrl)($this);$(this).autocomplete(atUrl,atOption)}else{$(this).autocomplete(atOption)}}});if($.fn.colorPicker){$(".color-pick",$p).colorPicker()}$("div.accordion",$p).each(function(){var $this=$(this);var extendAll=$this.attr("extendAll");if(extendAll){$this.find(".accordionContent").each(function(){var _contentDiv=$(this);_contentDiv.attr("height",_contentDiv.height());_contentDiv.attr("width",_contentDiv.width())})}else{$this.accordion({fillSpace:$this.attr("fillSpace"),alwaysOpen:true,active:0})}});$(":button.checkboxCtrl, :checkbox.checkboxCtrl",$p).click(function(event){$this=$(this);var groups=$this.attr("group");var checked=$this.is(":checked")?"all":"none";$(this).closest("div.grid").find(":checkbox[group="+groups+"]").each(function(i){if(!$(this).attr("disabled")){if($(this).hasClass("checkboxCtrl")){return true}else{if("all"==checked){$(this).attr("checked","true")}else{$(this).removeAttr("checked")}}}})});$("input[type=text], input[type=password], textarea",$p).addClass("textInput").focusClass("focus");$("input[readonly], textarea[readonly]",$p).addClass("readonly");$("input[disabled=true], textarea[disabled=true]",$p).addClass("disabled");$("input[type=text]",$p).not("div.tabs input[type=text]",$p).filter("[alt]").inputAlert();$("div.panelBar li, div.panelBar",$p).hoverClass("hover");$("div.button",$p).hoverClass("buttonHover");$("div.buttonActive",$p).hoverClass("buttonActiveHover");$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",$p).hoverClass("hover");$("form.required-validate",$p).each(function(){var $form=$(this);$form.validate({onsubmit:false,focusInvalid:false,focusCleanup:true,errorElement:"span",ignore:".ignore",invalidHandler:function(form,validator){var errors=validator.numberOfInvalids();if(errors){var message=DWZ.msg("validateFormError",[errors]);alertMsg.error(message)}}});$form.find("input[customvalid]").each(function(){var $input=$(this);$input.rules("add",{customvalid:$input.attr("customvalid")})})});if($.fn.datepicker){$("input.date",$p).each(function(){var $this=$(this);var opts={};if($this.attr("dateFmt")){opts.pattern=$this.attr("dateFmt")}if($this.attr("minDate")){opts.minDate=$this.attr("minDate")}if($this.attr("maxDate")){opts.maxDate=$this.attr("maxDate")}if($this.attr("mmStep")){opts.mmStep=$this.attr("mmStep")}if($this.attr("ssStep")){opts.ssStep=$this.attr("ssStep")}$this.datepicker(opts)})}$("div.withTitle:not(.noClose)>h1",$p).each(function(){var _this=$(this);_this.unbind("click");_this.bind("click",function(){var clickObj=$(this);if(clickObj.hasClass("close")){clickObj.nextAll().show();clickObj.removeClass("close");clickObj.addClass("open")}else{clickObj.nextAll().hide();clickObj.removeClass("open");clickObj.addClass("close")}});if(_this.hasClass("close")){_this.nextAll().hide()}});$("div.readonly",$p).each(function(){var _this=$(this);$("input:not(.write)",_this).addClass("readonly").attr("readonly","readonly");$("input[type=checkbox]:not(.write)",_this).addClass("readonly").attr("disabled","disabled");$("select:not(.write)",_this).addClass("readonly").attr("disabled","disabled");$("textarea:not(.write)",_this).addClass("readonly").attr("readonly","readonly")});$("input[readOnly]",$p).keydown(function(event){if(event.target){if($(event.target).hasClass("readonly")){stopEvent(event)}}});$("a[target=navTab]",$p).each(function(){$(this).click(function(event){var $this=$(this);var title=$this.attr("title")||$this.text();var tabid=$this.attr("rel")||"_blank";var fresh=eval($this.attr("fresh")||"true");var external=eval($this.attr("external")||"false");var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}navTab.openTab(tabid,url,{title:title,fresh:fresh,external:external});event.preventDefault()})});$("a[target=dialog]",$p).each(function(){$(this).click(function(event){var $this=$(this);var title=$this.attr("title")||$this.text();var rel=$this.attr("rel")||"_blank";var options={};var w=$this.attr("width");var h=$this.attr("height");if(w){options.width=w}if(h){options.height=h}options.max=eval($this.attr("max")||"false");options.mask=eval($this.attr("mask")||"false");options.maxable=eval($this.attr("maxable")||"true");options.minable=eval($this.attr("minable")||"true");options.fresh=eval($this.attr("fresh")||"true");options.resizable=eval($this.attr("resizable")||"true");options.drawable=eval($this.attr("drawable")||"true");options.close=eval($this.attr("close")||"");options.param=$this.attr("param")||"";var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.pdialog.open(url,rel,title,options);return false})});$("a[target=ajax]",$p).each(function(){$(this).click(function(event){var $this=$(this);var rel=$this.attr("rel");if(rel){var $rel=$("#"+rel);$rel.loadUrl($this.attr("href"),{},function(){$rel.find("[layoutH]").layoutH()})}event.preventDefault()})});if($.fn.sortDrag){$("div.sortDrag",$p).sortDrag()}if($.fn.ajaxTodo){$("a[target=ajaxTodo]",$p).ajaxTodo()}if($.fn.dwzExport){$("a[target=dwzExport]",$p).dwzExport()}if($.fn.lookup){$("a[lookupGroup]",$p).lookup()}if($.fn.multLookup){$("[multLookup]:button",$p).multLookup()}if($.fn.suggest){$("input[suggestFields]",$p).suggest()}if($.fn.itemDetail){$("table.itemDetail",$p).itemDetail()}if($.fn.selectedTodo){$("a[target=selectedTodo]",$p).selectedTodo()}if($.fn.pagerForm){$("form[rel=pagerForm]",$p).pagerForm({parentBox:$p})}$p.find("[layoutH]").layoutH();if(window.UE&&UE.ui){$("textarea.editor",$p).each(function(){var $this=$(this);var edtOpt=$this.attr("edtOpt");var simpleEditor=$this.hasClass("simpleEditor");var option={};if(edtOpt){option=eval("("+edtOpt+")")}if(simpleEditor){var simpleOption={minFrameHeight:300,toolbars:[["source","undo","redo","bold","italic","underline","|","customstyle","paragraph","fontfamily","fontsize"]]};$.extend(option,simpleOption)}var editor=new UE.ui.Editor(option);editor.render(this)})}$("form.entermode",$p).find("input,select").bind("keydown",function(){var e=event||window.event;if(e.keyCode==13&&e.srcElement.type!="button"&&e.srcElement.type!="submit"&&e.srcElement.type!="reset"&&e.srcElement.type!="hidden"&&e.srcElement.type!="textarea"&&e.srcElement.type!="radio"&&e.srcElement.type!="file"&&e.srcElement.type!=""){e.keyCode=9}});$(".accordionHeader",$p).bind("click",function(){var $this=$(this);var accordionContent=$this.next(".accordionContent");var h2Obj=$this.find(">h2");if(h2Obj.hasClass("collapsable")){accordionContent.animate({height:"0px"});h2Obj.removeClass("collapsable")}else{h2Obj.addClass("collapsable");var oldHeight=accordionContent.attr("height");var oldWidth=accordionContent.attr("width");accordionContent.animate({width:oldWidth,height:oldHeight});accordionContent.find(">ul").width(oldWidth)}});$(":input.titleFormat",$p).each(function(){$(this).bind("mouseover",function(){TitleFormat.titleMouseOver(this,event)});$(this).mouseout(function(){TitleFormat.titleMouseOut(this)})});$("label.for-label",$p).bind("click",function(event){var targetType=$(event.target).attr("type");if(!event.forClick&&targetType!="checkbox"&&targetType!="radio"){var newEvent=jQuery.Event("click");newEvent.forClick=true;$("input[type=radio]",$(this)).trigger(newEvent);$("input[type=checkbox]",$(this)).trigger(newEvent)}})}(function(a){a.fn.extend({theme:function(b){var d=a.extend({themeBase:"themes"},b);var c=d.themeBase+"/#theme#/style.css";return this.each(function(){var e=a(this).find(">li[theme]");var g=function(h){a("head").find("link[href$='style.css']").attr("href",c.replace("#theme#",h));e.find(">div").removeClass("selected");e.filter("[theme="+h+"]").find(">div").addClass("selected");if(a.isFunction(a.cookie)){a.cookie("dwz_theme",h)}};e.each(function(h){var k=a(this);var j=k.attr("theme");k.addClass(j).click(function(){g(j)})});if(a.isFunction(a.cookie)){var f=a.cookie("dwz_theme");if(f){g(f)}}})}})})(jQuery);(function(c){c.fn.navMenu=function(){return this.each(function(){var e=c(this);e.find("li>a").click(function(){var f=c(this);c.post(f.attr("href"),{},function(g){c("#sidebar").find(".accordion").remove().end().append(g).initUI();e.find("li").removeClass("selected");f.parent().addClass("selected");navTab.closeAllTab()});return false})})};c.fn.switchEnv=function(){var e={cities$:">ul>li",boxTitle$:">a>span"};return this.each(function(){var f=c(this);f.click(function(){if(f.hasClass("selected")){b(f)}else{d(f)}return false});f.find(e.cities$).click(function(){var g=c(this);c.post(g.find(">a").attr("href"),{},function(h){b(f);f.find(e.boxTitle$).html(g.find(">a").html());navTab.closeAllTab();c("#sidebar").find(".accordion").remove().end().append(h).initUI()});return false})})};function d(e){e.addClass("selected");c(document).bind("click",{box:e},a)}function b(e){e.removeClass("selected");c(document).unbind("click",a)}function a(e){b(e.data.box)}})(jQuery);$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(a){return $.regional.alertMsg.title[a]},_keydownOk:function(a){if(a.keyCode==DWZ.keyCode.ENTER){a.data.target.trigger("click")}return false},_keydownEsc:function(a){if(a.keyCode==DWZ.keyCode.ESC){a.data.target.trigger("click")}},_open:function(g,b,f){$(this._boxId).remove();var c="";if(f){for(var d=0;d<f.length;d++){var k=f[d].call?"callback":"";c+=DWZ.frag.alertButFrag.replace("#butMsg#",f[d].name).replace("#callback#",k)}}var h=DWZ.frag.alertBoxFrag.replace("#type#",g).replace("#title#",this._getTitle(g)).replace("#message#",b).replace("#butFragment#",c);$(h).appendTo("body").css("top","14px");if(this._closeTimer){clearTimeout(this._closeTimer);this._closeTimer=null}if(this._types.info==g||this._types.correct==g){this._closeTimer=setTimeout(function(){alertMsg.close()},1000)}else{$(this._bgId).show()}var e=$(this._boxId).find("a.button");var j=e.filter("[rel=callback]");var a=$(document);for(var d=0;d<f.length;d++){if(f[d].call){j.eq(d).click(f[d].call)}if(f[d].keyCode==DWZ.keyCode.ENTER){a.bind("keydown",{target:e.eq(d)},this._keydownOk)}if(f[d].keyCode==DWZ.keyCode.ESC){a.bind("keydown",{target:e.eq(d)},this._keydownEsc)}}},close:function(){$(document).unbind("keydown",this._keydownOk).unbind("keydown",this._keydownEsc);$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()});$(this._bgId).hide()},error:function(b,a){this._alert(this._types.error,b,a)},info:function(b,a){this._alert(this._types.info,b,a)},warn:function(b,a){this._alert(this._types.warn,b,a)},correct:function(b,a){this._alert(this._types.correct,b,a)},_alert:function(c,f,b){if("用户未登录或登录失效!"==f){var e=$("#layout").find("input.js_main_login_staff").val();var a=getGlobalPathRoot()+"oframe/sysmg/sys001/login-initD.gv?staffCode="+e;$.pdialog.open(a,"sys001d","超时登录",{mask:true,max:false,maxable:false,resizable:false,width:600,height:320});return}var g={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(g,b);var d=[{name:g.okName,call:g.okCall,keyCode:DWZ.keyCode.ENTER}];this._open(c,f,d)},confirm:function(c,a){var d={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(d,a);var b=[{name:d.okName,call:d.okCall,keyCode:DWZ.keyCode.ENTER},{name:d.cancelName,call:d.cancelCall,keyCode:DWZ.keyCode.ESC}];this._open(this._types.confirm,c,b)}};(function(b){var e,f,d;b.fn.extend({contextMenu:function(k,h){var j=b.extend({shadow:true,bindings:{},ctrSub:null},h);if(!e){e=b('<div id="contextmenu"></div>').appendTo("body").hide()}if(!f){f=b('<div id="contextmenuShadow"></div>').appendTo("body").hide()}d=d||[];d.push({id:k,shadow:j.shadow,bindings:j.bindings||{},ctrSub:j.ctrSub});var g=d.length-1;b(this).bind("contextmenu",function(l){c(g,this,l,j);return false});return this}});function c(j,h,l,g){var n=d[j];var k=b(DWZ.frag[n.id]);k.find("li").hoverClass();e.html(k);b.each(n.bindings,function(q,p){b("[rel='"+q+"']",e).bind("click",function(r){a();p(b(h),b("#"+n.id))})});var o=l.pageX;var m=l.pageY;if(b(window).width()<o+e.width()){o-=e.width()}if(b(window).height()<m+e.height()){m-=e.height()}e.css({left:o,top:m}).show();if(n.shadow){f.css({width:e.width(),height:e.height(),left:o+3,top:m+3}).show()}b(document).one("click",a);if(b.isFunction(n.ctrSub)){n.ctrSub(b(h),b("#"+n.id))}}function a(){e.hide();f.hide()}})(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_pIndex:-1,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"wdsy",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(a){if($.History){$.History.init("#container")}var b=this;$.extend(this._op,a);this.componentBox=$("#"+this._op.id);this._tabBox=this.componentBox.find(this._op.stTabBox);this._panelBox=this.componentBox.find(this._op.stPanelBox);this._prevBut=this.componentBox.find("."+this._op.prevClass);this._nextBut=this.componentBox.find("."+this._op.nextClass);this._moreBut=this.componentBox.find(this._op.stMore);this._moreBox=this.componentBox.find(this._op.stMoreLi);this._prevBut.click(function(c){b._scrollPrev()});this._nextBut.click(function(c){b._scrollNext()});this._moreBut.click(function(){b._moreBox.show();return false});$(document).click(function(){b._moreBox.hide()});this._contextmenu(this._tabBox);this._contextmenu(this._getTabs());this._init();this._ctrlScrollBut()},_init:function(){var a=this;this._getTabs().each(function(b){$(this).unbind("click").click(function(c){a._switchTab(b)});$(this).find(navTab._op.close$).unbind("click").click(function(){a._closeTab(b)})});this._getMoreLi().each(function(b){$(this).find(">a").unbind("click").click(function(c){a._switchTab(b)})});this._switchTab(this._currentIndex)},_contextmenu:function(b){var a=this;b.contextMenu("navTabCM",{bindings:{reload:function(d,c){a._reload(d,true)},closeCurrent:function(e,c){var d=e.attr("tabid");if(d){a.closeTab(d)}else{a.closeCurrentTab()}},closeOther:function(e,c){var d=a._indexTabId(e.attr("tabid"));a._closeOtherTab(d>0?d:a._currentIndex)},closeAll:function(d,c){a.closeAllTab()},addFav:function(e,d){var c=d.find("[rel='addFav']");if(!c.hasClass("disabled")){a.addFav(e)}}},ctrSub:function(q,e){var h=e.find("[rel='reload']");var k=e.find("[rel='closeCurrent']");var o=e.find("[rel='closeOther']");var j=e.find("[rel='closeAll']");var f=e.find("[rel='addFav']");var p=a._getTabs();var c=q.attr("tabid");if(p.size()<2){k.addClass("disabled");o.addClass("disabled");j.addClass("disabled")}if(a._currentIndex==0||c==a._op.mainTabId){k.addClass("disabled")}else{if(p.size()==2){o.addClass("disabled")}}var d=a._indexTabId(c);if(d>=0){var n=p.eq(d);var g=n.data("opt");var l=g.privilegeId;if(a._currentIndex==0||c==a._op.mainTabId||!l||isNaN(l)){f.addClass("disabled")}}}})},_getTabs:function(){return this._tabBox.find("> li")},_getPanels:function(){return this._panelBox.find("> div")},_getMoreLi:function(){return this._moreBox.find("> li")},_getTab:function(a){var b=this._indexTabId(a);if(b>=0){return this._getTabs().eq(b)}},getPanel:function(a){var b=this._indexTabId(a);if(b>=0){return this._getPanels().eq(b)}},_getTabsW:function(b,a){return this._tabsW(this._getTabs().slice(b,a))},_tabsW:function(a){var b=0;a.each(function(){b+=$(this).outerWidth(true)});return b},_indexTabId:function(b){if(!b){return -1}var a=-1;this._getTabs().each(function(c){if($(this).attr("tabid")==b){a=c;return}});return a},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){var d=this._getLeft(),b=0;var a=this._getTabs();for(var c=0;c<a.size();c++){if(b+d>=0){return c}b+=a.eq(c).outerWidth(true)}return 0},_visibleEnd:function(){var d=this._getLeft(),b=0;var a=this._getTabs();for(var c=0;c<a.size();c++){b+=a.eq(c).outerWidth(true);if(b+d>this._getScrollBarW()){return c}}return a.size()},_scrollPrev:function(){var a=this._visibleStart();if(a>0){this._scrollTab(-this._getTabsW(0,a-1))}},_scrollNext:function(){var a=this._visibleEnd();if(a<this._getTabs().size()){this._scrollTab(-this._getTabsW(0,a+1)+this._getScrollBarW())}},_scrollTab:function(c,a){var b=this;this._tabBox.animate({left:c+"px"},200,function(){b._ctrlScrollBut()})},_scrollCurrent:function(){var a=this._tabsW(this._getTabs());if(a<=this._getScrollBarW()){this._scrollTab(0)}else{if(this._getLeft()<this._getScrollBarW()-a){this._scrollTab(this._getScrollBarW()-a)}else{if(this._currentIndex<this._visibleStart()){this._scrollTab(-this._getTabsW(0,this._currentIndex))}else{if(this._currentIndex>=this._visibleEnd()){this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(true)-this._getTabsW(0,this._currentIndex))}}}}},_ctrlScrollBut:function(){var a=this._tabsW(this._getTabs());if(this._getScrollBarW()>a){this._prevBut.hide();this._nextBut.hide();this._tabBox.parent().removeClass("tabsPageHeaderMargin")}else{this._prevBut.show().removeClass("tabsLeftDisabled");this._nextBut.show().removeClass("tabsRightDisabled");this._tabBox.parent().addClass("tabsPageHeaderMargin");if(this._getLeft()>=0){this._prevBut.addClass("tabsLeftDisabled")}else{if(this._getLeft()<=this._getScrollBarW()-a){this._nextBut.addClass("tabsRightDisabled")}}}},_switchTab:function(b){var a=this._getTabs().removeClass("selected").eq(b).addClass("selected");this._getPanels().hide().eq(b).show();this._getMoreLi().removeClass("selected").eq(b).addClass("selected");this._currentIndex=b;this._scrollCurrent();this._reload(a)},_closeTab:function(d,a){this._getTabs().eq(d).remove();this._getPanels().eq(d).trigger(DWZ.eventType.pageClear).remove();this._getMoreLi().eq(d).remove();if(this._currentIndex>=d){this._currentIndex--}if(a){var c=this._indexTabId(a);if(c>0){this._currentIndex=c}}else{if(this._pIndex>0){this._currentIndex=this._pIndex}}var b=this._getTabs().length-1;if(this._currentIndex>b){this._currentIndex=b}this._init();this._scrollCurrent();this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(a){var b=this._indexTabId(a);if(b>0){this._closeTab(b)}},closeCurrentTab:function(a){if(this._currentIndex>0){this._closeTab(this._currentIndex,a)}},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove();this._getPanels().filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove();this._getMoreLi().filter(":gt(0)").remove();this._currentIndex=0;this._init();this._scrollCurrent()},addFav:function(t){var $this=this;var tabId=t.attr("tabid");var iOpenIndex=$this._indexTabId(tabId);if(iOpenIndex>=0){var $tab=$this._getTabs().eq(iOpenIndex);var data=$tab.data("opt");var privilegeId=data.privilegeId;if(privilegeId&&!isNaN(privilegeId)){var url=getGlobalPathRoot()+"oframe/main/main-addFav.gv";var ajaxPacket=new AJAXPacket(url);ajaxPacket.data.add("privilegeId",privilegeId);ajaxPacket.data.add("prjCd",getPrjCd());core.ajax.sendPacketHtml(ajaxPacket,function(response){var jsonData=eval("("+response+")");var isSuccess=jsonData.success;if(!isSuccess){alertMsg.warn(jsonData.errMsg)}})}}},_closeOtherTab:function(a){a=a||this._currentIndex;if(a>0){var b=":eq("+a+")";this._getTabs().not(b).filter(":gt(0)").remove();this._getPanels().not(b).filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove();this._getMoreLi().not(b).filter(":gt(0)").remove();this._currentIndex=1;this._init();this._scrollCurrent()}else{this.closeAllTab()}},_loadUrlCallback:function(a){a.find("[layoutH]").layoutH();a.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(d,a){a=a||d.data("reloadFlag");var b=d.attr("url");var c=d.data("opt");if(a&&b){d.data("reloadFlag",null);var e=this.getPanel(d.attr("tabid"));if(d.hasClass("external")){navTab.openExternal(b,e)}else{e.loadUrl(b,c,function(){navTab._loadUrlCallback(e)})}}},reloadFlag:function(a){var b=this._getTab(a);if(b){if(this._indexTabId(a)==this._currentIndex){this._reload(b,true)}else{b.data("reloadFlag",1)}}},reload:function(b,a){var f=$.extend({data:{},navTabId:"",callback:null},a);var d=f.navTabId?this._getTab(f.navTabId):this._getTabs().eq(this._currentIndex);var e=f.navTabId?this.getPanel(f.navTabId):this._getPanels().eq(this._currentIndex);if(e){if(!b){b=d.attr("url")}if(b){if(d.hasClass("external")){navTab.openExternal(b,e)}else{if($.isEmptyObject(f.data)){var c=$("#pagerForm",e);f.data=c.size()>0?c.serializeArray():{}}e.ajaxUrl({type:"POST",url:b,data:f.data,callback:function(g){navTab._loadUrlCallback(e);if($.isFunction(f.callback)){f.callback(g)}}})}}}},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var a=DWZ.jsonEval(this.getCurrentPanel().html());if(a&&a.statusCode==DWZ.statusCode.timeout){this.closeCurrentTab()}},openExternal:function(a,c){var b=navTab._panelBox.height();c.html(DWZ.frag.externalFrag.replaceAll("{url}",a).replaceAll("{height}",b+"px"))},openTab:function(b,c,k){var f=$.extend({title:"New Tab",data:{},fresh:false,external:false},k);this._pIndex=this._currentIndex;var d=this._indexTabId(b);if(d>=0){var h=this._getTabs().eq(d);var a=h.attr("tabid")==this._op.mainTabId?"> span > span":"> span";h.find(">a").attr("title",f.title).find(a).text(f.title);var j=this._getPanels().eq(d);if(f.fresh||!h.attr("url")){h.attr("url",c);h.data("opt",f.data);if(f.external||c.isExternalUrl()){h.addClass("external");navTab.openExternal(c,j)}else{h.removeClass("external");j.ajaxUrl({type:"GET",url:c,data:f.data,callback:function(){navTab._loadUrlCallback(j)}})}}this._currentIndex=d;j.find(".pageContent>.panelBar").width(j.find(".pageContent").width())}else{var e='<li tabid="#tabid#"><a href="javascript:" title="#title#" class="#tabid#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>';this._tabBox.append(e.replaceAll("#tabid#",b).replaceAll("#title#",f.title));this._panelBox.append('<div class="page unitBox"></div>');this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",f.title));var g=this._getTabs();var h=g.filter(":last");h.data("opt",f.data);var j=this._getPanels().filter(":last");if(f.external||c.isExternalUrl()){h.addClass("external");navTab.openExternal(c,j)}else{h.removeClass("external");j.ajaxUrl({type:"GET",url:c,data:f.data,callback:function(){navTab._loadUrlCallback(j)}})}if($.History){setTimeout(function(){$.History.addHistory(b,function(l){var m=navTab._indexTabId(l);if(m>=0){navTab._switchTab(m)}},b)},10)}this._currentIndex=g.size()-1;this._contextmenu(g.filter(":last").hoverClass("hover"))}j.attr("opCode",f.data.opCode);this._init();this._scrollCurrent();this._getTabs().eq(this._currentIndex).attr("url",c)},getCurrentTabId:function(){var a=$(this._getTabs()[this._currentIndex]);return a.attr("tabid")}};(function(a){a.fn.extend({tabs:function(c){var e=a.extend({reverse:false,eventType:"click",currentIndex:0,stTabHeader:"> .tabsHeader",stTab:">.tabsHeaderContent>ul",stTabPanel:"> .tabsContent",ajaxClass:"j-ajax",closeClass:"close",prevClass:"tabsLeft",nextClass:"tabsRight"},c);return this.each(function(){d(a(this))});function d(j){var h=j.add(a("> *",j));var g=a(e.stTabHeader,h);var k=a(e.stTab+" li",g);var f=a(e.stTabPanel+" > *",h);k.unbind().find("a").unbind();g.find("."+e.prevClass).unbind();g.find("."+e.nextClass).unbind();k.each(function(l){if(e.currentIndex==l){a(this).addClass("selected")}else{a(this).removeClass("selected")}if(e.eventType=="hover"){a(this).hover(function(m){b(j,l)})}else{a(this).click(function(m){b(j,l)})}a("a",this).each(function(){if(a(this).hasClass(e.ajaxClass)){a(this).click(function(m){var n=f.eq(l);if(this.href&&!n.attr("loaded")){n.loadUrl(this.href,{},function(){n.find("[layoutH]").layoutH();n.attr("loaded",true)})}m.preventDefault()})}else{if(a(this).hasClass(e.closeClass)){a(this).click(function(m){k.eq(l).remove();f.eq(l).remove();if(l==e.currentIndex){e.currentIndex=(l+1<k.size())?l:l-1}else{if(l<e.currentIndex){e.currentIndex=l}}d(j);return false})}}})});b(j,e.currentIndex)}function b(k,l){var j=k.add(a("> *",k));var h=a(e.stTabHeader,j);var n=a(e.stTab+" li",h);var f=a(e.stTabPanel+" > *",j);var g=n.eq(l);var m=f.eq(l);if(e.reverse&&(g.hasClass("selected"))){n.removeClass("selected");f.hide()}else{e.currentIndex=l;n.removeClass("selected");g.addClass("selected");f.hide().eq(e.currentIndex).show()}if(!m.attr("inited")){m.attr("inited",1000).find("input[type=text]").filter("[alt]").inputAlert()}}}})})(jQuery);(function(a){a.fn.extend({jresize:function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){var c=this;a("div[class^='resizable']",c).each(function(){a(this).hide()})})}}return this.each(function(){var d=a(this);var c=a(".resizable");a("div[class^='resizable']",d).each(function(){var e=this;a(e).mousedown(function(f){a.pdialog.switchDialog(d);a.resizeTool.start(c,d,f,a(e).attr("tar"));return false}).show()})})}});a.resizeTool={start:function(c,b,f,d){a.pdialog.initResize(c,b,d);a.data(c[0],"layer-drag",{options:a.extend(a.pdialog._op,{target:d,dialog:b,stop:a.resizeTool.stop})});a.layerdrag.start(c[0],f,a.pdialog._op)},stop:function(){var b=a.data(arguments[0],"layer-drag");a.pdialog.resizeDialog(arguments[0],b.options.dialog,b.options.target);a("body").css("cursor","");a(arguments[0]).hide()}};a.layerdrag={start:function(d,c,b){if(!a.layerdrag.current){a.layerdrag.current={el:d,oleft:parseInt(d.style.left)||0,owidth:parseInt(d.style.width)||0,otop:parseInt(d.style.top)||0,oheight:parseInt(d.style.height)||0,ox:c.pageX||c.screenX,oy:c.pageY||c.clientY};a(document).bind("mouseup",a.layerdrag.stop);a(document).bind("mousemove",a.layerdrag.drag)}return a.layerdrag.preventEvent(c)},drag:function(k){if(!k){var k=window.event}var j=a.layerdrag.current;var g=a.data(j.el,"layer-drag");var c=(k.pageX||k.screenX)-j.ox;var d=(k.pageY||k.clientY)-j.oy;if((k.pageY||k.clientY)<=0||(k.pageY||k.clientY)>=(a(window).height()-a(".dialogHeader",a(g.options.dialog)).outerHeight())){return false}var h=g.options.target;var f=j.owidth;var b=j.oheight;if(h!="n"&&h!="s"){f+=(h.indexOf("w")>=0)?-c:c}if(f>=a.pdialog._op.minW){if(h.indexOf("w")>=0){j.el.style.left=(j.oleft+c)+"px"}if(h!="n"&&h!="s"){j.el.style.width=f+"px"}}if(h!="w"&&h!="e"){b+=(h.indexOf("n")>=0)?-d:d}if(b>=a.pdialog._op.minH){if(h.indexOf("n")>=0){j.el.style.top=(j.otop+d)+"px"}if(h!="w"&&h!="e"){j.el.style.height=b+"px"}}return a.layerdrag.preventEvent(k)},stop:function(d){var c=a.layerdrag.current;var b=a.data(c.el,"layer-drag");a(document).unbind("mousemove",a.layerdrag.drag);a(document).unbind("mouseup",a.layerdrag.stop);if(b.options.stop){b.options.stop.apply(c.el,[c.el])}a.layerdrag.current=null;return a.layerdrag.preventEvent(d)},preventEvent:function(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}return false}}})(jQuery);(function(a){a.fn.extend({jTask:function(b){return this.each(function(){var c=a(this);var d=c.attr("id");c.click(function(g){var f=a("body").data(d);if(c.hasClass("selected")){a("a.minimize",f).trigger("click")}else{if(f.is(":hidden")){a.taskBar.restoreDialog(f)}else{a(f).trigger("click")}}a.taskBar.scrollCurrent(a(this));return false});a("div.close",c).click(function(f){a.pdialog.close(d);return false}).hoverClass("closeHover");c.hoverClass("hover")})}});a.taskBar={_taskBar:null,_taskBox:null,_prevBut:null,_nextBut:null,_op:{id:"taskbar",taskBox:"div.taskbarContent",prevBut:".taskbarLeft",prevDis:"taskbarLeftDisabled",nextBut:".taskbarRight",nextDis:"taskbarRightDisabled",selected:"selected",boxMargin:"taskbarMargin"},init:function(b){var c=this;a.extend(this._op,b);this._taskBar=a("#"+this._op.id);if(this._taskBar.size()==0){this._taskBar=a(DWZ.frag.taskbar).appendTo(a("#layout"));this._taskBar.find(".taskbarLeft").hoverClass("taskbarLeftHover");this._taskBar.find(".taskbarRight").hoverClass("taskbarRightHover")}this._taskBox=this._taskBar.find(this._op.taskBox);this._taskList=this._taskBox.find(">ul");this._prevBut=this._taskBar.find(this._op.prevBut);this._nextBut=this._taskBar.find(this._op.nextBut);this._prevBut.click(function(d){c.scrollLeft()});this._nextBut.click(function(d){c.scrollRight()});this._contextmenu(this._taskBox)},_contextmenu:function(b){a(b).contextMenu("dialogCM",{bindings:{closeCurrent:function(d,c){var e=d.isTag("li")?d:a.taskBar._getCurrent();a("div.close",e).trigger("click")},closeOther:function(e,d){var c=e.isTag("li")?("#"+e.attr("id")):".selected";var f=a.taskBar._taskList.find(">li:not(:"+c+")");f.each(function(g){a("div.close",f[g]).trigger("click")})},closeAll:function(d,c){var e=a.taskBar._getTasks();e.each(function(f){a("div.close",e[f]).trigger("click")})}},ctrSub:function(d,c){var e=c.find("[rel='closeCurrent']");var f=c.find("[rel='closeOther']");if(!a.taskBar._getCurrent()[0]){e.addClass("disabled");f.addClass("disabled")}else{if(a.taskBar._getTasks().size()==1){f.addClass("disabled")}}}})},_scrollCurrent:function(){var b=this._tasksW(this._getTasks());if(b>this._getTaskBarW()){var d=this;var e=a(">li:last-child",this._taskList);var c=this._getTaskBarW()-e.position().left-e.outerWidth(true);this._taskList.animate({left:c+"px"},200,function(){d._ctrlScrollBut()})}else{this._ctrlScrollBut()}},_getTaskBarW:function(){return this._taskBox.width()-(this._prevBut.is(":hidden")?this._prevBut.width()+2:0)-(this._nextBut.is(":hidden")?this._nextBut.width()+2:0)},_scrollTask:function(b){var d=this;if(b.position().left+this._getLeft()+b.outerWidth()>this._getBarWidth()){var c=this._getTaskBarW()-b.position().left-b.outerWidth(true)-2;this._taskList.animate({left:c+"px"},200,function(){d._ctrlScrollBut()})}else{if(b.position().left+this._getLeft()<0){var c=this._getLeft()-(b.position().left+this._getLeft());this._taskList.animate({left:c+"px"},200,function(){d._ctrlScrollBut()})}}},_ctrlScrollBut:function(){var b=this._tasksW(this._getTasks());if(this._getTaskBarW()>b){this._taskBox.removeClass(this._op.boxMargin);this._nextBut.hide();this._prevBut.hide();if(this._getTasks().eq(0)[0]){this._scrollTask(this._getTasks().eq(0))}}else{this._taskBox.addClass(this._op.boxMargin);this._nextBut.show().removeClass(this._op.nextDis);this._prevBut.show().removeClass(this._op.prevDis);if(this._getLeft()>=0){this._prevBut.addClass(this._op.prevDis)}if(this._getLeft()<=this._getTaskBarW()-b){this._nextBut.addClass(this._op.nextDis)}}},_getLeft:function(){return this._taskList.position().left},_visibleStart:function(){var d=this._getLeft();var b=this._getTasks();for(var c=0;c<b.size();c++){if(b.eq(c).position().left+b.eq(c).outerWidth(true)+d>=0){return b.eq(c)}}return b.eq(0)},_visibleEnd:function(){var d=this._getLeft();var b=this._getTasks();for(var c=0;c<b.size();c++){if(b.eq(c).position().left+b.eq(c).outerWidth(true)+d>this._getBarWidth()){return b.eq(c)}}return b.eq(b.size()-1)},_getTasks:function(){return this._taskList.find(">li")},_tasksW:function(b){var c=0;b.each(function(){c+=a(this).outerWidth(true)});return c},_getBarWidth:function(){return this._taskBar.innerWidth()},addDialog:function(e,d){this.show();var b=a("#"+e,this._taskList);if(!b[0]){var c='<li id="#taskid#"><div class="taskbutton"><span>#title#</span></div><div class="close">Close</div></li>';this._taskList.append(c.replace("#taskid#",e).replace("#title#",d));b=a("#"+e,this._taskList);b.jTask()}else{a(">div>span",b).text(d)}this._contextmenu(b);this.switchTask(e);this._scrollTask(b)},closeDialog:function(c){var b=(typeof c=="string")?a("#"+c,this._taskList):c;b.remove();if(this._getTasks().size()==0){this.hide()}this._scrollCurrent()},restoreDialog:function(d){var c=(typeof d=="string")?a("body").data(d):d;var e=(typeof d=="string")?d:c.data("id");var b=a.taskBar.getTask(e);a(".resizable").css({top:a(window).height()-60,left:a(b).position().left,height:a(b).outerHeight(),width:a(b).outerWidth()}).show().animate({top:a(c).css("top"),left:a(c).css("left"),width:a(c).css("width"),height:a(c).css("height")},250,function(){a(this).hide();a(c).show();a.pdialog.attachShadow(c)});a.taskBar.switchTask(e)},inactive:function(b){a("#"+b,this._taskList).removeClass("selected")},scrollLeft:function(){var b=this._visibleStart();this._scrollTask(b)},scrollRight:function(){var b=this._visibleEnd();this._scrollTask(b)},scrollCurrent:function(b){this._scrollTask(b)},switchTask:function(b){this._getCurrent().removeClass("selected");this.getTask(b).addClass("selected")},_getCurrent:function(){return this._taskList.find(">.selected")},getTask:function(b){return a("#"+b,this._taskList)},show:function(){if(this._taskBar.is(":hidden")){this._taskBar.css("top",a(window).height()-34+this._taskBar.outerHeight()).show();this._taskBar.animate({top:a(window).height()-this._taskBar.outerHeight()},500)}},hide:function(){this._taskBar.animate({top:a(window).height()-29+this._taskBar.outerHeight(true)},500,function(){a.taskBar._taskBar.hide()})}}})(jQuery);(function($){$.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:false,mask:false,resizable:true,drawable:true,maxable:false,minable:true,fresh:true},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(url,options){var op=$.extend({data:{},dialogId:"",callback:null},options);var dialog=(op.dialogId&&$("body").data(op.dialogId))||this._current;if(dialog){var jDContent=dialog.find(".dialogContent");jDContent.ajaxUrl({type:"POST",url:url,data:op.data,callback:function(response){jDContent.find("[layoutH]").layoutH(jDContent);$(".pageContent",dialog).width($(dialog).width()-4);$(":button.close",dialog).click(function(){$.pdialog.close(dialog);return false});if($.isFunction(op.callback)){op.callback(response)}}})}},open:function(url,dlgid,title,options){var op=$.extend({},$.pdialog._op,options);var dialog=$("body").data(dlgid);if(dialog){if(dialog.is(":hidden")){dialog.show()}if(op.fresh||url!=$(dialog).data("url")){dialog.data("url",url);dialog.find(".dialogHeader").find("h1").html(title);this.switchDialog(dialog);var jDContent=dialog.find(".dialogContent");var urlData=op.data;if(!urlData){urlData={}}jDContent.loadUrl(url,urlData,function(){jDContent.find("[layoutH]").layoutH(jDContent);$(".pageContent",dialog).width($(dialog).width()-4);$("button.close").click(function(){$.pdialog.close(dialog);return false})})}}else{$("body").append(DWZ.frag.dialogFrag);dialog=$(">.dialog:last-child","body");dialog.data("id",dlgid);dialog.data("url",url);if(options.close){dialog.data("close",options.close)}if(options.param){dialog.data("param",options.param)}if(options.sFunc){dialog.data("sFunc",options.sFunc)}($.fn.bgiframe&&dialog.bgiframe());dialog.find(".dialogHeader").find("h1").html(title);$(dialog).css("zIndex",($.pdialog._zIndex+=2));$("div.shadow").css("zIndex",$.pdialog._zIndex-3).show();$.pdialog._init(dialog,options);$(dialog).click(function(){$.pdialog.switchDialog(dialog)});if(op.resizable){dialog.jresize()}if(op.drawable){dialog.dialogDrag()}$("a.close",dialog).click(function(event){$.pdialog.close(dialog);return false});if(op.maxable){$("a.maximize",dialog).show().click(function(event){$.pdialog.switchDialog(dialog);$.pdialog.maxsize(dialog);dialog.jresize("destroy").dialogDrag("destroy");return false})}else{$("a.maximize",dialog).hide()}$("a.restore",dialog).click(function(event){$.pdialog.restore(dialog);dialog.jresize().dialogDrag();return false});if(op.minable){$("a.minimize",dialog).show().click(function(event){$.pdialog.minimize(dialog);return false})}else{$("a.minimize",dialog).hide()}$("div.dialogHeader a",dialog).mousedown(function(){return false});$("div.dialogHeader",dialog).dblclick(function(){if($("a.restore",dialog).is(":hidden")){$("a.maximize",dialog).trigger("click")}else{$("a.restore",dialog).trigger("click")}});if(op.max){$.pdialog.maxsize(dialog);dialog.jresize("destroy").dialogDrag("destroy")}$("body").data(dlgid,dialog);if($.pdialog._current&&op.mask){dialog.data("pid",$.pdialog._current.data("id"))}$.pdialog._current=dialog;$.pdialog.attachShadow(dialog);var jDContent=$(".dialogContent",dialog);var urlData=op.data;if(!urlData){urlData={}}jDContent.loadUrl(url,urlData,function(){jDContent.find("[layoutH]").layoutH(jDContent);$(".pageContent",dialog).width($(dialog).width()-4);$("button.close").click(function(){$.pdialog.close(dialog);return false})})}if(op.mask){$(dialog).css("zIndex",1000);$("a.minimize",dialog).hide();$(dialog).data("mask",true);$("#dialogBackground").show()}else{if(op.minable){$.taskBar.addDialog(dlgid,title)}}stopEvent(event)},switchDialog:function(dialog){var index=$(dialog).css("zIndex");$.pdialog.attachShadow(dialog);if($.pdialog._current!=dialog){var cindex=$($.pdialog._current).css("zIndex");$($.pdialog._current).css("zIndex",index);$(dialog).css("zIndex",cindex);$("div.shadow").css("zIndex",cindex-1);$.pdialog._current=dialog}$.taskBar.switchTask(dialog.data("id"))},attachShadow:function(dialog){var shadow=$("div.shadow");if(shadow.is(":hidden")){shadow.show()}shadow.css({top:parseInt($(dialog)[0].style.top)-2,left:parseInt($(dialog)[0].style.left)-4,height:parseInt($(dialog).height())+8,width:parseInt($(dialog).width())+8,zIndex:parseInt($(dialog).css("zIndex"))-1});$(".shadow_c",shadow).children().andSelf().each(function(){$(this).css("height",$(dialog).outerHeight()-4)})},_init:function(dialog,options){var op=$.extend({},this._op,options);var height=op.height>op.minH?op.height:op.minH;var width=op.width>op.minW?op.width:op.minW;if(isNaN(dialog.height())||dialog.height()<height){$(dialog).height(height+"px");$(".dialogContent",dialog).height(height-$(".dialogHeader",dialog).outerHeight()-$(".dialogFooter",dialog).outerHeight())}if(isNaN(dialog.css("width"))||dialog.width()<width){$(dialog).width(width+"px")}var iTop=($(window).height()-dialog.height())/2;dialog.css({left:($(window).width()-dialog.width())/2,top:iTop>0?iTop:0})},initResize:function(resizable,dialog,target){$("body").css("cursor",target+"-resize");resizable.css({top:$(dialog).css("top"),left:$(dialog).css("left"),height:$(dialog).css("height"),width:$(dialog).css("width")});resizable.show()},repaint:function(target,options){var shadow=$("div.shadow");if(target!="w"&&target!="e"){shadow.css("height",shadow.outerHeight()+options.tmove);$(".shadow_c",shadow).children().andSelf().each(function(){$(this).css("height",$(this).outerHeight()+options.tmove)})}if(target=="n"||target=="nw"||target=="ne"){shadow.css("top",options.otop-2)}if(options.owidth&&(target!="n"||target!="s")){shadow.css("width",options.owidth+8)}if(target.indexOf("w")>=0){shadow.css("left",options.oleft-4)}},resizeTool:function(target,tmove,dialog){$("div[class^='resizable']",dialog).filter(function(){return $(this).attr("tar")=="w"||$(this).attr("tar")=="e"}).each(function(){$(this).css("height",$(this).outerHeight()+tmove)})},resizeDialog:function(obj,dialog,target){var oleft=parseInt(obj.style.left);var otop=parseInt(obj.style.top);var height=parseInt(obj.style.height);var width=parseInt(obj.style.width);if(target=="n"||target=="nw"){tmove=parseInt($(dialog).css("top"))-otop}else{tmove=height-parseInt($(dialog).css("height"))}$(dialog).css({left:oleft,width:width,top:otop,height:height});$(".dialogContent",dialog).css("width",(width-2)+"px");$(".pageContent",dialog).css("width",(width-4)+"px");if(target!="w"&&target!="e"){var content=$(".dialogContent",dialog);content.css({height:height-$(".dialogHeader",dialog).outerHeight()-$(".dialogFooter",dialog).outerHeight()});content.find("[layoutH]").layoutH(content);$.pdialog.resizeTool(target,tmove,dialog)}$.pdialog.repaint(target,{oleft:oleft,otop:otop,tmove:tmove,owidth:width});$(window).trigger(DWZ.eventType.resizeGrid)},close:function(dialog){if(typeof dialog=="string"){dialog=$("body").data(dialog)}var close=dialog.data("close");var go=true;if(close&&$.isFunction(close)){var param=dialog.data("param");if(param&&param!=""){param=DWZ.jsonEval(param);go=close(param)}else{go=close()}if(!go){return}}var dialogCloseFun=$("span.dCloseFunc",dialog).attr("dCloseFunc");if(dialogCloseFun){try{eval("("+dialogCloseFun+")")}catch(e){}}$(dialog).hide();$(dialog).find(".dialogContent").html("");$("div.shadow").hide();if($(dialog).data("mask")){$("#dialogBackground").hide()}else{if($(dialog).data("id")){$.taskBar.closeDialog($(dialog).data("id"))}}var pid=$(dialog).data("pid");$("body").removeData($(dialog).data("id"));$(dialog).trigger(DWZ.eventType.pageClear).remove();if(pid){$.pdialog._current=null;this.switchDialog($("body").data(pid))}},closeCurrent:function(){this.close($.pdialog._current)},reloadCurrent:function(){$.pdialog.reload($.pdialog.getCurrent().data("url"),{})},reloadDialog:function(dialogId){var dialog=$("body").data(dialogId);if(dialog){$.pdialog.reload(dialog.data("url"),{dialogId:dialogId})}},checkTimeout:function(){var $conetnt=$(".dialogContent",$.pdialog._current);var json=DWZ.jsonEval($conetnt.html());if(json&&json.statusCode==DWZ.statusCode.timeout){this.closeCurrent()}},maxsize:function(dialog){$(dialog).data("original",{top:$(dialog).css("top"),left:$(dialog).css("left"),width:$(dialog).css("width"),height:$(dialog).css("height")});$("a.maximize",dialog).hide();$("a.restore",dialog).show();var iContentW=$(window).width();var iContentH=$(window).height();$(dialog).css({top:"0px",left:"0px",width:iContentW+"px",height:iContentH+"px"});$.pdialog._resizeContent(dialog,iContentW,iContentH)},restore:function(dialog){var original=$(dialog).data("original");var dwidth=parseInt(original.width);var dheight=parseInt(original.height);$(dialog).css({top:original.top,left:original.left,width:dwidth,height:dheight});$.pdialog._resizeContent(dialog,dwidth,dheight);$("a.maximize",dialog).show();$("a.restore",dialog).hide();$.pdialog.attachShadow(dialog)},minimize:function(dialog){$(dialog).hide();$("div.shadow").hide();var task=$.taskBar.getTask($(dialog).data("id"));$(".resizable").css({top:$(dialog).css("top"),left:$(dialog).css("left"),height:$(dialog).css("height"),width:$(dialog).css("width")}).show().animate({top:$(window).height()-60,left:task.position().left,width:task.outerWidth(),height:task.outerHeight()},250,function(){$(this).hide();$.taskBar.inactive($(dialog).data("id"))})},_resizeContent:function(dialog,width,height){var content=$(".dialogContent",dialog);content.css({width:(width-2)+"px",height:height-$(".dialogHeader",dialog).outerHeight()-$(".dialogFooter",dialog).outerHeight()});content.find("[layoutH]").layoutH(content);$(".pageContent",dialog).css("width",(width-4)+"px");$(window).trigger(DWZ.eventType.resizeGrid)}}})(jQuery);(function(a){a.fn.dialogDrag=function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){var c=this;a("div.dialogHeader",c).unbind("mousedown")})}}return this.each(function(){var c=a(this);a("div.dialogHeader",c).mousedown(function(d){a.pdialog.switchDialog(c);c.data("task",true);setTimeout(function(){if(c.data("task")){a.dialogDrag.start(c,d)}},100);return false}).mouseup(function(d){c.data("task",false);return false})})};a.dialogDrag={currId:null,_init:function(b){this.currId=new Date().getTime();var c=a("#dialogProxy");if(!c.size()){c=a(DWZ.frag.dialogProxy);a("body").append(c)}a("h1",c).html(a(".dialogHeader h1",b).text())},start:function(c,d){this._init(c);var b=a("#dialogProxy");b.css({left:c.css("left"),top:c.css("top"),height:c.css("height"),width:c.css("width"),zIndex:parseInt(c.css("zIndex"))+1}).show();a("div.dialogContent",b).css("height",a("div.dialogContent",c).css("height"));b.data("dialog",c);c.css({left:"-10000px",top:"-10000px"});a(".shadow").hide();a(b).jDrag({selector:".dialogHeader",stop:this.stop,event:d});return false},stop:function(){var c=a(arguments[0]);var b=c.data("dialog");a(b).css({left:a(c).css("left"),top:a(c).css("top")});a.pdialog.attachShadow(b);a(c).hide()}}})(jQuery);(function(a){a.fn.cssv=function(b){var c=a(this).css(b);return c.substring(0,c.indexOf("px"))*1};a.fn.jBar=function(b){var c=a.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},b);return this.each(function(){var f=this;var d=a(c.sideBar2,f);var e=a(c.sideBar,f);a(c.toggleBut,e).click(function(){DWZ.ui.sbar=false;a(c.splitBar).hide();var k=d.cssv("left")+d.outerWidth();var g=k-e.outerWidth();var j=a(c.container).cssv("left")-(e.outerWidth()-d.outerWidth());var h=e.outerWidth()-d.outerWidth()+a(c.container).outerWidth();a(c.container).animate({left:j,width:h},50,function(){e.animate({left:g},500,function(){e.hide();d.show().css("left",-50).animate({left:5},200);a(window).trigger(DWZ.eventType.resizeGrid)})});a(c.collapse,d).click(function(){var m=d.cssv("left")+d.outerWidth();if(e.is(":hidden")){a(c.toggleBut,e).hide();e.show().animate({left:m},500);a(c.container).click(l)}else{e.animate({left:g},500,function(){e.hide()})}function l(){a(c.container).unbind("click",l);if(!DWZ.ui.sbar){e.animate({left:g},500,function(){e.hide()})}}return false});return false});a(c.toggleBut,d).click(function(){DWZ.ui.sbar=true;d.animate({left:-25},200,function(){e.show()});e.animate({left:5},800,function(){a(c.splitBar).show();a(c.toggleBut,e).show();var h=5+e.outerWidth()+a(c.splitBar).outerWidth();var g=a(c.container).outerWidth()-(h-a(c.container).cssv("left"));a(c.container).css({left:h,width:g});a(c.collapse,d).unbind("click");a(window).trigger(DWZ.eventType.resizeGrid)});return false});a(c.splitBar).mousedown(function(g){a(c.splitBar2).each(function(){var h=a(this);setTimeout(function(){h.show()},100);h.css({visibility:"visible",left:a(c.splitBar).css("left")});h.jDrag(a.extend(b,{obj:a("#sidebar"),move:"horizontal",event:g,stop:function(){a(this).css("visibility","hidden");var j=a(this).cssv("left")-a(c.splitBar).cssv("left");var m=e.outerWidth()+j;var l=a(c.container).cssv("left")+j;var k=a(c.container).outerWidth()-j;e.css("width",m);a(c.splitBar).css("left",a(this).css("left"));a(c.container).css({left:l,width:k})}}));return false})})})}})(jQuery);(function(a){a.fn.jDrag=function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){a(this).unbind("mousedown",a.rwdrag.start);a.data(this,"pp-rwdrag",null)})}}return this.each(function(){var d=a(this);a.data(a.rwdrag,"pp-rwdrag",{options:a.extend({el:d,obj:d},b)});if(b.event){a.rwdrag.start(b.event)}else{var c=b.selector;a(c,obj).bind("mousedown",a.rwdrag.start)}})};a.rwdrag={start:function(d){document.onselectstart=function(f){return false};var c=a.data(this,"pp-rwdrag");var b=c.options.el[0];a.data(b,"pp-rwdrag",{options:c.options});if(!a.rwdrag.current){a.rwdrag.current={el:b,oleft:parseInt(b.style.left)||0,otop:parseInt(b.style.top)||0,ox:d.pageX||d.screenX,oy:d.pageY||d.screenY};a(document).bind("mouseup",a.rwdrag.stop).bind("mousemove",a.rwdrag.drag)}},drag:function(h){if(!h){var h=window.event}var g=a.rwdrag.current;var c=a.data(g.el,"pp-rwdrag");var f=(g.oleft+(h.pageX||h.clientX)-g.ox);var d=(g.otop+(h.pageY||h.clientY)-g.oy);if(d<1){d=0}if(c.options.move=="horizontal"){if((c.options.minW&&f>=a(c.options.obj).cssv("left")+c.options.minW)&&(c.options.maxW&&f<=a(c.options.obj).cssv("left")+c.options.maxW)){g.el.style.left=f+"px"}else{if(c.options.scop){if(c.options.relObj){if((f-parseInt(c.options.relObj.style.left))>c.options.cellMinW){g.el.style.left=f+"px"}}else{g.el.style.left=f+"px"}}}}else{if(c.options.move=="vertical"){g.el.style.top=d+"px"}else{var b=c.options.selector?a(c.options.selector,c.options.obj):a(c.options.obj);if(f>=-b.outerWidth()*2/3&&d>=0&&(f+b.outerWidth()/3<a(window).width())&&(d+b.outerHeight()<a(window).height())){g.el.style.left=f+"px";g.el.style.top=d+"px"}}}if(c.options.drag){c.options.drag.apply(g.el,[g.el])}return a.rwdrag.preventEvent(h)},stop:function(d){var c=a.rwdrag.current;var b=a.data(c.el,"pp-rwdrag");a(document).unbind("mousemove",a.rwdrag.drag).unbind("mouseup",a.rwdrag.stop);if(b.options.stop){b.options.stop.apply(c.el,[c.el])}a.rwdrag.current=null;document.onselectstart=function(f){return true};return a.rwdrag.preventEvent(d)},preventEvent:function(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}return false}}})(jQuery);(function(b){var a={cursor:"move",sortBoxs:"div.sortDrag",replace:false,items:"> *",selector:"",zIndex:1000};var c={start:function(f,e,h,k){var g=this._createPlaceholder(e);var j=e.clone();var d=e.position();j.data("$sortBox",f).data("op",k).data("$item",e).data("$placeholder",g);j.addClass("sortDragHelper").css({position:"absolute",top:d.top,left:d.left,zIndex:k.zIndex,width:e.width()+"px",height:e.height()+"px"}).jDrag({selector:k.selector,drag:this.drag,stop:this.stop,event:h});e.before(g).before(j).hide();return false},drag:function(){var m=b(arguments[0]),f=m.data("$sortBox"),k=m.data("$placeholder");var j=f.find(m.data("op")["items"]).filter(":visible").filter(":not(.sortDragPlaceholder, .sortDragHelper)");var d=m.position(),e=j.eq(0).position();var n=c._getOverSortBox(m);if(n.length>0&&n[0]!=f[0]){k.appendTo(n);m.data("$sortBox",n)}else{for(var g=0;g<j.length;g++){var l=j.eq(g),h=l.position();if(d.top>h.top+10){l.after(k)}else{if(d.top<=h.top){l.before(k);break}}}}},stop:function(){var h=b(arguments[0]),f=h.data("$sortBox"),e=h.data("$item"),g=h.data("$placeholder");var d=g.position();h.animate({top:(d.top)+"px",left:d.left+"px"},{complete:function(){if(h.data("op")["replace"]){$srcBox=e.parents(a.sortBoxs+":first");$destBox=g.parents(a.sortBoxs+":first");if($srcBox[0]!=$destBox[0]){$replaceItem=g.next();if($replaceItem.size()>0){$replaceItem.insertAfter(e)}}}e.insertAfter(g).show();g.remove();h.remove()},duration:300})},_createPlaceholder:function(d){return b("<"+d[0].nodeName+' class="sortDragPlaceholder"/>').css({width:d.outerWidth()+"px",height:d.outerHeight()+"px",marginTop:d.css("marginTop"),marginRight:d.css("marginRight"),marginBottom:d.css("marginBottom"),marginLeft:d.css("marginLeft")})},_getOverSortBox:function(e){var f=e.position();var g=f.top+(e.height()/2),d=f.left+(e.width()/2);return b(a.sortBoxs).filter(":visible").filter(function(){var j=b(this),h=j.position();return DWZ.isOver(g,d,h.top,h.left,j.height(),j.width())})}};b.fn.sortDrag=function(d){return this.each(function(){var f=b.extend({},a,d);var e=b(this);if(e.attr("selector")){f.selector=e.attr("selector")}e.find(f.items).each(function(h){var g=b(this),j=g;if(f.selector){j=g.find(f.selector).css({cursor:f.cursor})}j.mousedown(function(k){c.start(e,g,k,f);k.preventDefault()})})})};b.fn.addSortDrag=function(d,e){return this.each(function(){var g=b.extend({},a,d);var f=b(this);if(f.attr("selector")){g.selector=f.attr("selector")}f.find(e).each(function(j){var h=b(this),k=h;k.mousedown(function(l){c.start(f,h,l,g);l.preventDefault()})})})}})(jQuery);(function(a){a.fn.extend({cssTable:function(b){return this.each(function(){var f=a(this);var e=f.find("tbody>tr");var c=f.parent();var d=f.hasClass("nowrap");e.hoverClass("hover").each(function(g){var h=a(this);if(!d&&g%2==1){h.addClass("trbg")}h.click(function(){e.filter(".selected").removeClass("selected");h.addClass("selected");var j=h.attr("target");if(j){if(a("#"+j,c).size()==0){c.prepend('<input id="'+j+'" type="hidden" />')}a("#"+j,c).val(h.attr("rel"))}})});f.find("thead [orderField]").orderBy({targetType:f.attr("targetType"),rel:f.attr("rel"),asc:f.attr("asc")||"asc",desc:f.attr("desc")||"desc"})})}})})(jQuery);(function(a){a.fn.jTable=function(b){return this.each(function(){var m=a(this),x=m.attr("nowrapTD");var s=m.width();var t="true";if(typeof(m.attr("adjust"))!="undefined"){t=m.attr("adjust")}var d=[];var j=m.parent().addClass("j-resizeGrid");var u=a(this).attr("layoutH");var o=m.find("thead>tr:last-child").find("th");for(var v=0,r=o.size();v<r;v++){var g=a(o[v]);var w=[],q=g.innerWidth()-(100*g.innerWidth()/s)-2;if(t!="true"&&parseInt(g.attr("width"))>q){q=parseInt(g.attr("width"))}w[0]=parseInt(q);w[1]=g.attr("align");d[d.length]=w}a(this).wrap("<div class='grid'></div>");var h=m.parent().html(m.html());var A=h.find("thead");A.wrap("<div class='gridHeader'><div class='gridThead'><table style='width:"+(s-20)+"px;'></table></div></div>");var p=a(">tr:last-child",A);var f=a(">th",p);a("th",A).each(function(){var l=a(this);l.html("<div class='gridCol' title='"+l.text()+"'>"+l.html()+"</div>")});f.each(function(l){var D=a(this),C=d[l];D.addClass(C[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(C[0])}).filter("[orderField]").orderBy({targetType:m.attr("targetType"),rel:m.attr("rel"),asc:m.attr("asc")||"asc",desc:m.attr("desc")||"desc"});var c=h.find(">tbody");var e=u?" layoutH='"+u+"'":"";c.wrap("<div class='gridScroller'"+e+" style='width:"+j.width()+"px;'><div class='gridTbody'><table style='width:"+(s-20)+"px;'></table></div></div>");var n=a(">tr:first-child",c);var B=c.find(">tr");B.hoverClass().each(function(){var E=a(this);var C=a(">td",this);for(var D=0;D<C.size();D++){var l=a(C[D]);if(x!="false"){l.html("<div>"+l.html()+"</div>")}if(D<d.length){l.addClass(d[D][1])}}E.click(function(){B.filter(".selected").removeClass("selected");E.addClass("selected");var F=E.attr("target");if(F){if(a("#"+F,h).size()==0){h.prepend('<input id="'+F+'" type="hidden" />')}a("#"+F,h).val(E.attr("rel"))}})});a(">td",n).each(function(l){if(l<d.length){a(this).width(d[l][0])}});h.append("<div class='resizeMarker' style='height:300px; left:57px;display:none;'></div><div class='resizeProxy' style='height:300px; left:377px;display:none;'></div>");var z=a(".gridScroller",h);z.scroll(function(C){var D=a(".gridThead",h);if(z.scrollLeft()>0){D.css("position","relative");var l=z.scrollLeft();D.css("left",z.cssv("left")-l)}if(z.scrollLeft()==0){D.css("position","relative");D.css("left","0px")}return false});a(">tr",A).each(function(){a(">th",this).each(function(l){var D=this,C=a(this);C.mouseover(function(E){var F=a.jTableTool.getOffset(D,E).offsetX;if(C.outerWidth()-F<5){C.css("cursor","col-resize").mousedown(function(G){a(".resizeProxy",h).show().css({left:a.jTableTool.getRight(D)-a(".gridScroller",h).scrollLeft(),top:a.jTableTool.getTop(D),height:a.jTableTool.getHeight(D,h),cursor:"col-resize"});a(".resizeMarker",h).show().css({left:a.jTableTool.getLeft(D)+1-a(".gridScroller",h).scrollLeft(),top:a.jTableTool.getTop(D),height:a.jTableTool.getHeight(D,h)});a(".resizeProxy",h).jDrag(a.extend(b,{scop:true,cellMinW:20,relObj:a(".resizeMarker",h)[0],move:"horizontal",event:G,stop:function(){var N=a(".resizeProxy",h).position().left;var Q=a(".resizeMarker",h).position().left;var K=N-Q-C.outerWidth()-9;var P=a.jTableTool.getColspan(C);var O=a.jTableTool.getCellNum(C);var R=C.width(),H=C.width()+K;C.width(H+"px");var J=a(">tr:first-child",c);var I=a(">td",J).eq(O-1);I.width(H+"px");var M=a(A).parent();M.width((M.width()-R+H)+"px");var L=a(c).parent();L.width(M.width());a(".resizeMarker,.resizeProxy",h).hide()}}))})}else{C.css("cursor",C.attr("orderField")?"pointer":"default");C.unbind("mousedown")}return false})})});function k(){a("div.j-resizeGrid").each(function(){var l=a(this).innerWidth();if(l){a("div.gridScroller",this).width(l+"px")}})}a(window).unbind(DWZ.eventType.resizeGrid).bind("resizeGrid",k)})};a.fn.jResize=function(){var d=a(this);var f=d.width();var h=a("div.gridThead",d);if(h.length>0){var b=a(">table",h);b.css("width",f-20)}var g=a("div.gridScroller",d);g.css("width",f);var e=a("div.gridTbody",d);if(e.length>0){var c=a(">table",e);c.css("width",f-20)}};a.jTableTool={getLeft:function(c){var b=0;a(c).prevAll().each(function(){b+=a(this).outerWidth()});return b-1},getRight:function(c){var b=0;a(c).prevAll().andSelf().each(function(){b+=a(this).outerWidth()});return b-1},getTop:function(c){var b=0;a(c).parent().prevAll().each(function(){b+=a(this).outerHeight()});return b},getHeight:function(e,d){var b=0;var c=a(e).parent();c.nextAll().andSelf().each(function(){b+=a(this).outerHeight()});a(".gridTbody",d).children().each(function(){b+=a(this).outerHeight()});return b},getCellNum:function(b){return a(b).prevAll().andSelf().size()},getColspan:function(b){return a(b).attr("colspan")||1},getStart:function(b){var c=1;a(b).prevAll().each(function(){c+=parseInt(a(this).attr("colspan")||1)});return c},getPageCoord:function(b){var c={x:0,y:0};while(b){c.x+=b.offsetLeft;c.y+=b.offsetTop;b=b.offsetParent}return c},getOffset:function(h,c){if(a.browser.msie){var d=a(h).offset();var f={offsetX:c.pageX||c.screenX,offsetY:c.pageY||c.screenY};var j={offsetX:f.offsetX-d.left,offsetY:f.offsetY-d.top};return j}var g=c.target;if(g.offsetLeft==undefined){g=g.parentNode}var e=a.jTableTool.getPageCoord(g);var b={x:window.pageXOffset+c.clientX,y:window.pageYOffset+c.clientY};var j={offsetX:b.x-e.x,offsetY:b.y-e.y};return j}}})(jQuery);function validateCallback(c,e,b){var a=$(c);if(!a.valid()){return false}var d=function(){$.ajax({type:c.method||"POST",url:a.attr("action"),data:a.serializeArray(),dataType:"json",cache:false,success:e||DWZ.ajaxDone,error:DWZ.ajaxError})};if(b){alertMsg.confirm(b,{okCall:d})}else{d()}return false}function iframeCallback(b,d){var a=$(b),c=$("#callbackframe");if(!a.valid()){return false}if(c.size()==0){c=$("<iframe id='callbackframe' name='callbackframe' src='about:blank' style='display:none'></iframe>").appendTo("body")}if(!b.ajax){a.append('<input type="hidden" name="ajax" value="1" />')}b.target="callbackframe";_iframeResponse(c[0],d||DWZ.ajaxDone)}function _iframeResponse(a,d){var b=$(a),c=$(document);c.trigger("ajaxStart");b.bind("load",function(g){b.unbind("load");c.trigger("ajaxStop");if(a.src=="javascript:'%3Chtml%3E%3C/html%3E';"||a.src=="javascript:'<html></html>';"){return}var j=a.contentDocument||a.document;if(j.readyState&&j.readyState!="complete"){return}if(j.body&&j.body.innerHTML=="false"){return}var f;if(j.XMLDocument){f=j.XMLDocument}else{if(j.body){try{f=b.contents().find("body").text();f=jQuery.parseJSON(f)}catch(h){f=j.body.innerHTML}}else{f=j}}d(f)})}function navTabAjaxDone(c){DWZ.ajaxDone(c);if(c.statusCode==DWZ.statusCode.ok){if(c.navTabId){navTab.reloadFlag(c.navTabId)}else{var b=$("#pagerForm",navTab.getCurrentPanel());var a=b.size()>0?b.serializeArray():{};navTabPageBreak(a,c.rel)}if("closeCurrent"==c.callbackType){setTimeout(function(){navTab.closeCurrentTab(c.navTabId)},100)}else{if("forward"==c.callbackType){navTab.reload(c.forwardUrl)}else{if("forwardConfirm"==c.callbackType){alertMsg.confirm(c.confirmMsg||DWZ.msg("forwardConfirmMsg"),{okCall:function(){navTab.reload(c.forwardUrl)},cancelCall:function(){navTab.closeCurrentTab(c.navTabId)}})}else{navTab.getCurrentPanel().find(":input[initValue]").each(function(){var d=$(this).attr("initValue");$(this).val(d)})}}}}}function dialogAjaxDone(c){DWZ.ajaxDone(c);if(c.statusCode==DWZ.statusCode.ok){if(c.navTabId){navTab.reload(c.forwardUrl,{navTabId:c.navTabId})}else{var b=$("#pagerForm",navTab.getCurrentPanel());var a=b.size()>0?b.serializeArray():{};navTabPageBreak(a,c.rel)}if("closeCurrent"==c.callbackType){$.pdialog.closeCurrent()}}}function navTabSearch(c,b){var a=$(c);if(c[DWZ.pageInfo.pageNum]){c[DWZ.pageInfo.pageNum].value=1}navTab.reload(a.attr("action"),{data:a.serializeArray(),navTabId:b});return false}function dialogSearch(b){var a=$(b);if(b[DWZ.pageInfo.pageNum]){b[DWZ.pageInfo.pageNum].value=1}$.pdialog.reload(a.attr("action"),{data:a.serializeArray()});return false}function dwzSearch(a,b){if(b=="dialog"){dialogSearch(a)}else{navTabSearch(a)}return false}function divSearch(c,a){var b=$(c);if(c[DWZ.pageInfo.pageNum]){c[DWZ.pageInfo.pageNum].value=1}if(a){var d=$("#"+a);d.ajaxUrl({type:"POST",url:b.attr("action"),data:b.serializeArray(),callback:function(){d.find("[layoutH]").layoutH()}})}return false}function _getPagerForm(c,a){var b=$("#pagerForm",c).get(0);if(b){if(a.pageNum){b[DWZ.pageInfo.pageNum].value=a.pageNum}if(a.numPerPage){b[DWZ.pageInfo.numPerPage].value=a.numPerPage}if(a.orderField){b[DWZ.pageInfo.orderField].value=a.orderField}if(a.orderDirection&&b[DWZ.pageInfo.orderDirection]){b[DWZ.pageInfo.orderDirection].value=a.orderDirection}}return b}function dwzPageBreak(a){var f=$.extend({targetType:"navTab",rel:"",data:{pageNum:"",numPerPage:"",orderField:"",orderDirection:""},callback:null},a);var d=f.targetType=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();if(f.rel){var c=d.find("#"+f.rel);var b=_getPagerForm(c,f.data);if(b){c.ajaxUrl({type:"POST",url:$(b).attr("action"),data:$(b).serializeArray(),callback:function(){c.find("[layoutH]").layoutH()}})}}else{var b=_getPagerForm(d,f.data);var e=$(b).serializeArray();if(f.targetType=="dialog"){if(b){$.pdialog.reload($(b).attr("action"),{data:e,callback:f.callback})}}else{if(b){navTab.reload($(b).attr("action"),{data:e,callback:f.callback})}}}}function navTabPageBreak(b,a){dwzPageBreak({targetType:"navTab",rel:a,data:b})}function dialogPageBreak(b,a){dwzPageBreak({targetType:"dialog",rel:a,data:b})}function ajaxTodo(url,callback){var $callback=callback||navTabAjaxDone;if(!$.isFunction($callback)){$callback=eval("("+callback+")")}$.ajax({type:"POST",url:url,dataType:"json",cache:false,success:$callback,error:DWZ.ajaxError})}function uploadifyQueueComplete(a){var b="The total number of files uploaded: "+a.uploadsSuccessful+"<br/>The total number of errors while uploading: "+a.uploadsErrored+"<br/>The total number of bytes uploaded: "+a.queueBytesUploaded+"<br/>The average speed of all uploaded files: "+a.averageSpeed;if(a.uploadsErrored){alertMsg.error(b)}else{alertMsg.correct(b)}}function uploadifySuccess(b,c,a){alertMsg.info(c)}function uploadifyError(a,c,b){alertMsg.error(c+": "+b)}function uploadifyError(d,a,c,b){if("Cancelled"==b){return}else{alertMsg.error(b)}}$.fn.extend({ajaxTodo:function(){return this.each(function(){var a=$(this);a.click(function(c){var b=unescape(a.attr("href")).replaceTmById($(c.target).parents(".unitBox:first"));DWZ.debug(b);if(!b.isFinishedTm()){alertMsg.error(a.attr("warn")||DWZ.msg("alertSelectMsg"));return false}var d=a.attr("title");if(d){alertMsg.confirm(d,{okCall:function(){ajaxTodo(b,a.attr("callback"))}})}else{ajaxTodo(b,a.attr("callback"))}c.preventDefault()})})},dwzExport:function(){function a(e){var d=e.attr("targetType")=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();var b=$("#pagerForm",d);var c=e.attr("href");window.location=c+(c.indexOf("?")==-1?"?":"&")+b.serialize()}return this.each(function(){var b=$(this);b.click(function(c){var d=b.attr("title");if(d){alertMsg.confirm(d,{okCall:function(){a(b)}})}else{a(b)}c.preventDefault()})})}});(function(a){a.fn.extend({pagination:function(d){var c={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){var l=a(this);var n=new b(d);var f=n.getInterval();var o="";for(var k=f.start;k<f.end;k++){o+=c.pageNumFrag.replaceAll("#pageNum#",k).replaceAll("#liClass#",k==n.getCurrentPage()?"selected j-num":"j-num")}l.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",o).replaceAll("#currentPage#",n.getCurrentPage())).find("li").hoverClass();var j=l.find(c.first$);var g=l.find(c.prev$);var h=l.find(c.next$);var m=l.find(c.last$);if(n.hasPrev()){j.add(g).find(">span").hide();e(g,n.getCurrentPage()-1,n.targetType(),n.rel());e(j,1,n.targetType(),n.rel())}else{j.add(g).addClass("disabled").find(">a").hide()}if(n.hasNext()){h.add(m).find(">span").hide();e(h,n.getCurrentPage()+1,n.targetType(),n.rel());e(m,n.numPages(),n.targetType(),n.rel())}else{h.add(m).addClass("disabled").find(">a").hide()}l.find(c.nums$).each(function(p){e(a(this),p+f.start,n.targetType(),n.rel())});l.find(c.jumpto$).each(function(){var r=a(this);var q=r.find(":text");var p=r.find(":button");p.click(function(s){var t=q.val();if(t&&t.isPositiveInteger()){dwzPageBreak({targetType:n.targetType(),rel:n.rel(),data:{pageNum:t}})}});q.keyup(function(s){if(s.keyCode==DWZ.keyCode.ENTER){p.click()}})})});function e(g,j,h,f){g.bind("click",{pageNum:j},function(k){dwzPageBreak({targetType:h,rel:f,data:{pageNum:k.data.pageNum}});k.preventDefault()})}},orderBy:function(c){var d=a.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},c);return this.each(function(){var e=a(this).css({cursor:"pointer"}).click(function(){var g=e.attr("orderField");var f=e.hasClass(d.asc)?d.desc:d.asc;dwzPageBreak({targetType:d.targetType,rel:d.rel,data:{orderField:g,orderDirection:f}})})})},pagerForm:function(c){var e=a.extend({pagerForm$:"#pagerForm",parentBox:document},c);var d='<input type="hidden" name="#name#" value="#value#" />';return this.each(function(){var f=a(this),g=a(e.pagerForm$,e.parentBox);var h=g.attr("action").replaceAll("#rel#",f.attr("action"));g.attr("action",h);f.find(":input").each(function(){var l=a(this),j=l.attr("name");if(j&&(!l.is(":checkbox,:radio")||l.is(":checked"))){if(g.find(":input[name='"+j+"']").length==0){var k=d.replaceAll("#name#",j).replaceAll("#value#",l.val());g.append(k)}}})})}});var b=function(c){this.opts=a.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return false}},c)};a.extend(b.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var e=Math.ceil(this.opts.pageNumShown/2);var f=this.numPages();var d=f-this.opts.pageNumShown;var g=this.getCurrentPage()>e?Math.max(Math.min(this.getCurrentPage()-e,d),0):0;var c=this.getCurrentPage()>e?Math.min(this.getCurrentPage()+e,f):Math.min(this.opts.pageNumShown,f);return{start:g+1,end:c+1}},getCurrentPage:function(){var c=parseInt(this.opts.currentPage);if(isNaN(c)){return 1}return c},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.numPages()}})})(jQuery);(function(b){b.setRegional("datepicker",{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});b.fn.datepicker=function(g){var f={box$:"#calendar",year$:"#calendar [name=year]",month$:"#calendar [name=month]",tmInputs$:"#calendar .time :text",hour$:"#calendar .time .hh",minute$:"#calendar .time .mm",second$:"#calendar .time .ss",tmBox$:"#calendar .tm",tmUp$:"#calendar .time .up",tmDown$:"#calendar .time .down",close$:"#calendar .close",calIcon$:"a.inputDateButton",main$:"#calendar .main",days$:"#calendar .days",dayNames$:"#calendar .dayNames",clearBut$:"#calendar .clearBut",okBut$:"#calendar .okBut"};function h(k){var j=b(f.tmBox$);j.removeClass("hh").removeClass("mm").removeClass("ss");if(k){j.addClass(k);b(f.tmInputs$).removeClass("slt").filter("."+k).addClass("slt")}}function c(k,j){b(f.tmBox$).find("."+j+" li").each(function(){var l=b(this);l.click(function(){k.val(l.text())})})}function e(j){if(!((j.keyCode>=48&&j.keyCode<=57)||(j.keyCode==DWZ.keyCode.DELETE||j.keyCode==DWZ.keyCode.BACKSPACE))){return false}}function d(o,l){var j=parseInt(o.val()),m=parseInt(o.attr("start"))||0,k=parseInt(o.attr("end"));var n=parseInt(o.attr("step")||1);if(l==1){if(j<=k-n){o.val(j+n)}}else{if(l==-1){if(j>=m+n){o.val(j-n)}}else{if(j>k){o.val(k)}else{if(j<m){o.val(m)}}}}}return this.each(function(){var m=b(this);var n=new a(m.val(),g);function k(u){var o=u.getDateWrap();var v=u.getMinDate();var q=u.getMaxDate();var E=new Date(o.year,o.month-1,1);var A=E.getDay();var x="";if(A>0){E.setMonth(E.getMonth()-1);var z=u.getDateWrap(E);for(var F=z.days-A+1;F<=z.days;F++){var G=new Date(o.year,o.month-2,F);var s=(G>=v&&G<=q)?"":"disabled";x+='<dd class="other '+s+'" chMonth="-1" day="'+F+'">'+F+"</dd>"}}for(var F=1;F<=o.days;F++){var G=new Date(o.year,o.month-1,F);var s=(G>=v&&G<=q)?"":"disabled";if(F==o.day){x+='<dd class="slt '+s+'" day="'+F+'">'+F+"</dd>"}else{x+='<dd class="'+s+'" day="'+F+'">'+F+"</dd>"}}for(var F=1;F<=42-A-o.days;F++){var G=new Date(o.year,o.month,F);var s=(G>=v&&G<=q)?"":"disabled";x+='<dd class="other '+s+'" chMonth="1" day="'+F+'">'+F+"</dd>"}var C=b(f.days$).html(x).find("dd");C.not(".disabled").click(function(){var H=b(this);if(!u.hasTime()){var t=m.val();m.val(u.formatDate(u.changeDay(H.attr("day"),H.attr("chMonth"))));if(t!=m.val()){m.change()}l()}else{C.removeClass("slt");H.addClass("slt")}});if(!u.hasDate()){b(f.main$).addClass("nodate")}if(u.hasTime()){b("#calendar .time").show();var r=b(f.hour$).val(o.hour).focus(function(){h("hh")});var w=parseInt(o.minute/u.opts.mmStep)*u.opts.mmStep;var D=b(f.minute$).val(w).attr("step",u.opts.mmStep).focus(function(){h("mm")});var B=b(f.second$).val(u.hasSecond()?o.second:0).attr("step",u.opts.ssStep).focus(function(){h("ss")});r.add(D).add(B).click(function(){return false});c(r,"hh");c(D,"mm");c(B,"ss");b(f.box$).click(function(){h()});var p=b(f.tmInputs$);p.keydown(e).each(function(){var t=b(this);t.keyup(function(){d(t,0)})});b(f.tmUp$).click(function(){p.filter(".slt").each(function(){d(b(this),1)})});b(f.tmDown$).click(function(){p.filter(".slt").each(function(){d(b(this),-1)})});if(!u.hasHour()){r.attr("disabled",true)}if(!u.hasMinute()){D.attr("disabled",true)}if(!u.hasSecond()){B.attr("disabled",true)}}}function l(){b(f.box$).remove();b(document).unbind("click",l)}function j(p){l();var r=new a(m.val(),g);var s=m.offset();var t=s.top+this.offsetHeight;b(DWZ.frag.calendarFrag).appendTo("body").css({left:s.left+"px",top:t+"px"}).show().click(function(A){A.stopPropagation()});(b.fn.bgiframe&&b(f.box$).bgiframe());var q="";b.each(b.regional.datepicker.dayNames,function(B,A){q+="<dt>"+A+"</dt>"});b(f.dayNames$).html(q);var o=r.getDateWrap();var v=b(f.year$);var x=r.getMinDate().getFullYear();var w=r.getMaxDate().getFullYear();for(y=x;y<=w;y++){v.append('<option value="'+y+'"'+(o.year==y?'selected="selected"':"")+">"+y+"</option>")}var u=b(f.month$);b.each(b.regional.datepicker.monthNames,function(C,B){var A=C+1;u.append('<option value="'+A+'"'+(o.month==A?'selected="selected"':"")+">"+B+"</option>")});k(r);v.add(u).change(function(){r.changeDate(v.val(),u.val());k(r)});var z=b(f.box$).outerHeight(true);if(t>z&&t>b(window).height()-z){b(f.box$).css("top",s.top-z)}b(f.close$).click(function(){l()});b(f.clearBut$).click(function(){m.val("");l()});b(f.okBut$).click(function(){var C=b(f.days$).find("dd.slt");if(C.hasClass("disabled")){return false}var B=r.changeDay(C.attr("day"),C.attr("chMonth"));if(r.hasTime()){B.setHours(parseInt(b(f.hour$).val()));B.setMinutes(parseInt(b(f.minute$).val()));B.setSeconds(parseInt(b(f.second$).val()))}var A=m.val();m.val(r.formatDate(B));if(A!=m.val()){m.change()}l()});b(document).bind("click",l);return false}m.click(j);m.focus(j);m.parent().find(f.calIcon$).click(function(){m.trigger("click");return false})})};var a=function(e,d){this.opts=b.extend({pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},d);var c=new Date();this.opts.minDate=c.formatDateTm(this.opts.minDate);this.opts.maxDate=c.formatDateTm(this.opts.maxDate);this.sDate=e.trim()};b.extend(a.prototype,{get:function(c){return this.opts[c]},_getDays:function(d,c){return c==2?(d%4||!(d%100)&&d%400?28:29):(/4|6|9|11/.test(c)?30:31)},_minMaxDate:function(e){var d=e.split("-").length-1;var c="y-M-d";if(d==1){c="y-M"}else{if(d==0){c="y"}}return e.parseDate(c)},getMinDate:function(){return this._minMaxDate(this.opts.minDate)},getMaxDate:function(){var f=this.opts.maxDate;var d=f.split("-").length-1;var c=this._minMaxDate(f);if(d<2){var e=this._getDays(c.getFullYear(),c.getMonth()+1);c.setDate(e);if(d==0){c.setMonth(11)}}return c},getDateWrap:function(d){if(!d){d=this.parseDate(this.sDate)||new Date()}var f=d.getFullYear();var c=d.getMonth()+1;var e=this._getDays(f,c);return{year:f,month:c,day:d.getDate(),hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),days:e,date:d}},changeDate:function(g,c,f){var e=new Date(g,c-1,f||1);this.sDate=this.formatDate(e);return e},changeDay:function(c,e){if(!e){e=0}var d=this.getDateWrap();return this.changeDate(d.year,d.month+parseInt(e),c)},parseDate:function(c){if(!c){return null}return c.parseDate(this.opts.pattern)},formatDate:function(c){return c.formatDate(this.opts.pattern)},hasHour:function(){return this.opts.pattern.indexOf("H")!=-1},hasMinute:function(){return this.opts.pattern.indexOf("m")!=-1},hasSecond:function(){return this.opts.pattern.indexOf("s")!=-1},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){var d=["y","M","d","E"];for(var c=0;c<d.length;c++){if(this.opts.pattern.indexOf(d[c])!=-1){return true}}return false}})})(jQuery);(function(a){a.extend(a.fn,{jBlindUp:function(b){var c=a.extend({duration:500,easing:"swing",call:function(){}},b);return this.each(function(){var d=a(this);a(this).animate({height:0},{step:function(){},duration:c.duration,easing:c.easing,complete:function(){d.css({display:"none"});c.call()}})})},jBlindDown:function(b){var c=a.extend({to:0,duration:500,easing:"swing",call:function(){}},b);return this.each(function(){var e=a(this);var d=(c.to>0)?c.to:a.effect.getDimensions(e[0]).height;e.animate({height:d},{step:function(){},duration:c.duration,easing:c.easing,complete:function(){e.css({display:""});c.call()}})})},jSlideUp:function(b){var c=a.extend({to:0,duration:500,easing:"swing",call:function(){}},b);return this.each(function(){var e=a(this);e.wrapInner("<div></div>");var d=(c.to>0)?c.to:a.effect.getDimensions(a(">div",e)[0]).height;e.css({overflow:"visible",position:"relative"});a(">div",e).css({position:"relative"}).animate({top:-d},{easing:c.easing,duration:c.duration,complete:function(){e.html(a(this).html())}})})},jSlideDown:function(b){var c=a.extend({to:0,duration:500,easing:"swing",call:function(){}},b);return this.each(function(){var e=a(this);var d=(c.to>0)?c.to:a.effect.getDimensions(e[0]).height;e.wrapInner('<div style="top:-'+d+'px;"></div>');e.css({overflow:"visible",position:"relative",height:"0px"}).animate({height:d},{duration:c.duration,easing:c.easing,complete:function(){e.css({display:"",overflow:""});c.call()}});a(">div",e).css({position:"relative"}).animate({top:0},{easing:c.easing,duration:c.duration,complete:function(){e.html(a(this).html())}})})}});a.effect={getDimensions:function(c,g){var d=new a.effect.Rectangle;var f=a(c).css("display");var b=a(c).css("visibility");var e=a(c).height()==0?true:false;if(a(c).is(":hidden")){a(c).css({visibility:"hidden",display:"block"});if(e){a(c).css("height","")}if(a.browser.opera){refElement.focus()}}d.height=a(c).outerHeight();d.width=a(c).outerWidth();if(f=="none"){a(c).css({visibility:b,display:"none"});if(e){if(e){a(c).css("height","0px")}}}return d}};a.effect.Rectangle=function(){this.width=0;this.height=0;this.unit="px"}})(jQuery);(function(a){a.extend(a.fn,{jPanel:function(b){var c=a.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},b);return this.each(function(){var o=a(this);var m=o.hasClass("close");var j=o.hasClass("collapse");var e=a(">div[class!="+c.header+"]:eq(0)",o).addClass(c.content);var k=a(">h1",o).wrap('<div class="'+c.header+'"><div class="'+c.headerC+'"></div></div>');if(j){a('<a href=""></a>').addClass(m?c.exp:c.coll).appendTo(k)}var h=a(">div:first",o);var l=a('<div class="'+c.footer+'"><div class="'+c.footerC+'"></div></div>').appendTo(o);var f=o.attr("defH")?o.attr("defH"):0;var n=o.attr("minH")?o.attr("minH"):0;if(f>0){e.height(f+"px")}else{if(n>0){e.css("minHeight",n+"px")}}if(m){e.css({display:"none"})}if(!j){return}var d=a("a",h);var g=e.innerHeight();if(n>0&&n>=g){f=n}else{f=g}d.click(function(){if(d.hasClass(c.exp)){e.jBlindDown({to:f,call:function(){d.removeClass(c.exp).addClass(c.coll);if(n>=g){e.css("height",n+"300px")}}})}else{if(n>0){e.css("minHeight","")}if(n>=g){e.css("height",n+"px")}e.jBlindUp({call:function(){d.removeClass(c.coll).addClass(c.exp)}})}return false})})}})})(jQuery);(function(a){a.printBox=function(b){var d="printBox";var e=b?a("#"+b):a("body"),c=a("#"+d);if(c.size()==0){c=a('<div id="'+d+'"></div>').appendTo("body")}c.html(e.html()).find("[layoutH]").height("auto");window.print()}})(jQuery);(function(a){a.extend(a.validator.messages,{required:"必填字段",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:a.validator.format("长度最多是 {0} 的字符串"),minlength:a.validator.format("长度最少是 {0} 的字符串"),rangelength:a.validator.format("长度介于 {0} 和 {1} 之间的字符串"),range:a.validator.format("请输入一个介于 {0} 和 {1} 之间的值"),max:a.validator.format("请输入一个最大为 {0} 的值"),min:a.validator.format("请输入一个最小为 {0} 的值"),hssize:"请保留两位小数",alphanumeric:"字母、数字、下划线",lettersonly:"必须是字母",phone:"数字、空格、括号"});a.setRegional("datepicker",{dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]});a.setRegional("alertMsg",{title:{error:"错误",info:"提示",warn:"警告",correct:"成功",confirm:"确认提示"},butMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}})})(jQuery);